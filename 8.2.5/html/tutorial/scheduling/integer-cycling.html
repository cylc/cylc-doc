<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic Cycling &mdash; Cylc 8.2.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/diff_selector.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/grid_table.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/hieroglyph_theme_addons.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tutorial.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/addons.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />

  
    <link rel="shortcut icon" href="../../_static/cylc-favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/js/diff_selector.js"></script>
        <script src="../../_static/js/minicylc.js"></script>
        <script src="../../_static/js/spoiler.js"></script>
        <script src="../../_static/js/addons.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Datetime Cycling" href="datetime-cycling.html" />
    <link rel="prev" title="The flow.cylc File Format" href="graphing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/cylc-logo-white.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                8.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../7-to-8/index.html">Cylc 8 Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Scheduling</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="graphing.html">The <code class="xref cylc cylc-conf docutils literal notranslate"><span class="pre">flow.cylc</span></code> File Format</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Basic Cycling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#repeating-workflows">Repeating Workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#intercycle-dependencies">Intercycle Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recurrence-sections">Recurrence Sections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="datetime-cycling.html">Datetime Cycling</a></li>
<li class="toctree-l3"><a class="reference internal" href="further-scheduling.html">Further Scheduling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../runtime/index.html">Runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="../furthertopics/index.html">Further Topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../workflow-design-guide/index.html">Workflow Design Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Cylc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Tutorial</a></li>
          <li class="breadcrumb-item"><a href="index.html">Scheduling</a></li>
      <li class="breadcrumb-item active">Basic Cycling</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/tutorial/scheduling/integer-cycling.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="basic-cycling">
<span id="tutorial-integer-cycling"></span><h1>Basic Cycling<a class="headerlink" href="#basic-cycling" title="Permalink to this heading"></a></h1>
<div class="aims admonition">
<p class="admonition-title">Aims</p>
<div class="line-block">
<div class="line">You will be able to:</div>
<div class="line">✅ Write simple <a class="reference internal" href="../../glossary.html#term-cycling"><span class="xref std std-term">cycling</span></a> (repeating) workflows.</div>
</div>
</div>
<section id="repeating-workflows">
<h2>Repeating Workflows<a class="headerlink" href="#repeating-workflows" title="Permalink to this heading"></a></h2>
<p>You may want to repeat the same workflow multiple times. In Cylc this
is called <a class="reference internal" href="../../glossary.html#term-cycling"><span class="xref std std-term">cycling</span></a>, and each repetition is called a <a class="reference internal" href="../../glossary.html#term-cycle"><span class="xref std std-term">cycle</span></a>.</p>
<p>Each <a class="reference internal" href="../../glossary.html#term-cycle"><span class="xref std std-term">cycle</span></a> is given a unique label, called a
<a class="reference internal" href="../../glossary.html#term-cycle-point"><span class="xref std std-term">cycle point</span></a>. For now these will be integers, but <em>they can also be
datetimes</em> as we will see in the next section.</p>
<p>To make a workflow repeat we must tell Cylc three things:</p>
<dl class="simple">
<dt>The <a class="reference internal" href="../../glossary.html#term-recurrence"><span class="xref std std-term">recurrence</span></a>.</dt><dd><p>How often to repeat the workflow (or part of it).</p>
</dd>
<dt>The <a class="reference internal" href="../../glossary.html#term-initial-cycle-point"><span class="xref std std-term">initial cycle point</span></a>.</dt><dd><p>The cycle point to start from.</p>
</dd>
<dt>The <a class="reference internal" href="../../glossary.html#term-final-cycle-point"><span class="xref std std-term">final cycle point</span></a> (optional).</dt><dd><p>We can also tell Cylc where to stop the workflow.</p>
</dd>
</dl>
<p>Let’s take the bakery example from the previous section. Bread is
baked in batches so the bakery will repeat this workflow for each
batch. We can make the workflow repeat by adding three lines:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>[scheduling]
<span class="gi">+    cycling mode = integer</span>
<span class="gi">+    initial cycle point = 1</span>
<span class="w"> </span>    [[graph]]
<span class="gd">-        R1 = &quot;&quot;&quot;</span>
<span class="gi">+        P1 = &quot;&quot;&quot;</span>
<span class="w"> </span>            buy_ingredients =&gt; make_dough
<span class="w"> </span>            pre_heat_oven &amp; make_dough =&gt; bake_bread
<span class="w"> </span>            bake_bread =&gt; sell_bread &amp; clean_oven
<span class="w"> </span>        &quot;&quot;&quot;
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cycling</span> <span class="pre">mode</span> <span class="pre">=</span> <span class="pre">integer</span></code> tells Cylc to give our <a class="reference internal" href="../../glossary.html#term-cycle-point"><span class="xref std std-term">cycle points</span></a> integer labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initial</span> <span class="pre">cycle</span> <span class="pre">point</span> <span class="pre">=</span> <span class="pre">1</span></code> tells Cylc to start counting cycle points
from 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">P1</span></code> is the <a class="reference internal" href="../../glossary.html#term-recurrence"><span class="xref std std-term">recurrence</span></a>; a <code class="docutils literal notranslate"><span class="pre">P1</span></code> <a class="reference internal" href="../../glossary.html#term-graph-string"><span class="xref std std-term">graph string</span></a>
repeats at every integer <a class="reference internal" href="../../glossary.html#term-cycle-point"><span class="xref std std-term">cycle point</span></a>.</p></li>
</ul>
<p>The first three <a class="reference internal" href="../../glossary.html#term-cycle"><span class="xref std std-term">cycles</span></a> look like this, with the entire
workflow repeated at each cycle point:</p>
<div align="center" class="align-center"><div class="graphviz"><object data="../../_images/graphviz-01cdfbbf3d7a8a7da6b86824adc2682acb58bc7c.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph example {
size = &quot;7,15&quot;

subgraph cluster_1 {
    label = 1
    style = dashed
    &quot;1/pur&quot; [label=&quot;buy_ingredients\n1&quot;]
    &quot;1/mak&quot; [label=&quot;make_dough\n1&quot;]
    &quot;1/bak&quot; [label=&quot;bake_bread\n1&quot;]
    &quot;1/sel&quot; [label=&quot;sell_bread\n1&quot;]
    &quot;1/cle&quot; [label=&quot;clean_oven\n1&quot;]
    &quot;1/pre&quot; [label=&quot;pre_heat_oven\n1&quot;]
}

subgraph cluster_2 {
    label = 2
    style = dashed
    &quot;2/pur&quot; [label=&quot;buy_ingredients\n2&quot;]
    &quot;2/mak&quot; [label=&quot;make_dough\n2&quot;]
    &quot;2/bak&quot; [label=&quot;bake_bread\n2&quot;]
    &quot;2/sel&quot; [label=&quot;sell_bread\n2&quot;]
    &quot;2/cle&quot; [label=&quot;clean_oven\n2&quot;]
    &quot;2/pre&quot; [label=&quot;pre_heat_oven\n2&quot;]
}

subgraph cluster_3 {
    label = 3
    style = dashed
    &quot;3/pur&quot; [label=&quot;buy_ingredients\n3&quot;]
    &quot;3/mak&quot; [label=&quot;make_dough\n3&quot;]
    &quot;3/bak&quot; [label=&quot;bake_bread\n3&quot;]
    &quot;3/sel&quot; [label=&quot;sell_bread\n3&quot;]
    &quot;3/cle&quot; [label=&quot;clean_oven\n3&quot;]
    &quot;3/pre&quot; [label=&quot;pre_heat_oven\n3&quot;]
}

&quot;1/pur&quot; -&gt; &quot;1/mak&quot; -&gt; &quot;1/bak&quot; -&gt; &quot;1/sel&quot;
&quot;1/pre&quot; -&gt; &quot;1/bak&quot; -&gt; &quot;1/cle&quot;
&quot;2/pur&quot; -&gt; &quot;2/mak&quot; -&gt; &quot;2/bak&quot; -&gt; &quot;2/sel&quot;
&quot;2/pre&quot; -&gt; &quot;2/bak&quot; -&gt; &quot;2/cle&quot;
&quot;3/pur&quot; -&gt; &quot;3/mak&quot; -&gt; &quot;3/bak&quot; -&gt; &quot;3/sel&quot;
&quot;3/pre&quot; -&gt; &quot;3/bak&quot; -&gt; &quot;3/cle&quot;
}</p></object></div>
</div>
<p>The number under each task shows which <a class="reference internal" href="../../glossary.html#term-cycle-point"><span class="xref std std-term">cycle point</span></a> it belongs to.</p>
</section>
<section id="intercycle-dependencies">
<h2>Intercycle Dependencies<a class="headerlink" href="#intercycle-dependencies" title="Permalink to this heading"></a></h2>
<p>We’ve just seen how to write a workflow that repeats every <a class="reference internal" href="../../glossary.html#term-cycle"><span class="xref std std-term">cycle</span></a>.</p>
<p>Cylc runs tasks as soon as their dependencies are met, regardless of cycle
point, so cycles will not necessarily run in order. This can be efficient,
but it could also cause problems. For instance we could find ourselves
pre-heating the oven in one cycle while still cleaning it in another.</p>
<p>To resolve this we can add <a class="reference internal" href="../../glossary.html#term-dependency"><span class="xref std std-term">dependencies</span></a> <em>between</em>
cycles, to the graph. To ensure that <code class="docutils literal notranslate"><span class="pre">clean_oven</span></code> completes before
<code class="docutils literal notranslate"><span class="pre">pre_heat_oven</span></code> starts in the next cycle, we can write this:</p>
<div class="highlight-cylc-graph notranslate"><div class="highlight"><pre><span></span><span class="kd">clean_oven</span>[<span class="nb">-P1</span>] <span class="o">=&gt;</span> <span class="kd">pre_heat_oven</span>
</pre></div>
</div>
<p>In a <code class="docutils literal notranslate"><span class="pre">P1</span></code> recurrence, the suffix <code class="docutils literal notranslate"><span class="pre">[-P1]</span></code> means <em>the previous cycle point</em>,
Similarly, <code class="docutils literal notranslate"><span class="pre">[-P2]</span></code> refers back two cycles. The new dependency can be added
to the workflow graph like this:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>[scheduling]
<span class="w"> </span>    cycling mode = integer
<span class="w"> </span>    initial cycle point = 1
<span class="w"> </span>    [[graph]]
<span class="w"> </span>        P1 = &quot;&quot;&quot;
<span class="w"> </span>            buy_ingredients =&gt; make_dough
<span class="w"> </span>            pre_heat_oven &amp; make_dough =&gt; bake_bread
<span class="w"> </span>            bake_bread =&gt; sell_bread &amp; clean_oven
<span class="gi">+            clean_oven[-P1] =&gt; pre_heat_oven</span>
<span class="w"> </span>        &quot;&quot;&quot;
</pre></div>
</div>
<p>And the resulting workflow looks like this:</p>
<div align="center" class="align-center"><div class="graphviz"><object data="../../_images/graphviz-67061a0cb1a093d3d29cd2a417dc12c16a2e0b16.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph example {
size = &quot;7,15&quot;

subgraph cluster_1 {
    label = 1
    style = dashed
    &quot;1/pur&quot; [label=&quot;buy_ingredients\n1&quot;]
    &quot;1/mak&quot; [label=&quot;make_dough\n1&quot;]
    &quot;1/bak&quot; [label=&quot;bake_bread\n1&quot;]
    &quot;1/sel&quot; [label=&quot;sell_bread\n1&quot;]
    &quot;1/cle&quot; [label=&quot;clean_oven\n1&quot;]
    &quot;1/pre&quot; [label=&quot;pre_heat_oven\n1&quot;]
}

subgraph cluster_2 {
    label = 2
    style = dashed
    &quot;2/pur&quot; [label=&quot;buy_ingredients\n2&quot;]
    &quot;2/mak&quot; [label=&quot;make_dough\n2&quot;]
    &quot;2/bak&quot; [label=&quot;bake_bread\n2&quot;]
    &quot;2/sel&quot; [label=&quot;sell_bread\n2&quot;]
    &quot;2/cle&quot; [label=&quot;clean_oven\n2&quot;]
    &quot;2/pre&quot; [label=&quot;pre_heat_oven\n2&quot;]
}

subgraph cluster_3 {
    label = 3
    style = dashed
    &quot;3/pur&quot; [label=&quot;buy_ingredients\n3&quot;]
    &quot;3/mak&quot; [label=&quot;make_dough\n3&quot;]
    &quot;3/bak&quot; [label=&quot;bake_bread\n3&quot;]
    &quot;3/sel&quot; [label=&quot;sell_bread\n3&quot;]
    &quot;3/cle&quot; [label=&quot;clean_oven\n3&quot;]
    &quot;3/pre&quot; [label=&quot;pre_heat_oven\n3&quot;]
}

&quot;1/pur&quot; -&gt; &quot;1/mak&quot; -&gt; &quot;1/bak&quot; -&gt; &quot;1/sel&quot;
&quot;1/pre&quot; -&gt; &quot;1/bak&quot; -&gt; &quot;1/cle&quot;
&quot;1/cle&quot; -&gt; &quot;2/pre&quot;
&quot;2/pur&quot; -&gt; &quot;2/mak&quot; -&gt; &quot;2/bak&quot; -&gt; &quot;2/sel&quot;
&quot;2/pre&quot; -&gt; &quot;2/bak&quot; -&gt; &quot;2/cle&quot;
&quot;2/cle&quot; -&gt; &quot;3/pre&quot;
&quot;3/pur&quot; -&gt; &quot;3/mak&quot; -&gt; &quot;3/bak&quot; -&gt; &quot;3/sel&quot;
&quot;3/pre&quot; -&gt; &quot;3/bak&quot; -&gt; &quot;3/cle&quot;
}</p></object></div>
</div>
<p>The <a class="reference internal" href="../../glossary.html#term-intercycle-dependency"><span class="xref std std-term">intercycle dependency</span></a> forces the connected tasks, in
different cycle points, to run in order.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">buy_ingredients</span></code> task has no arrows pointing at it.
This means it has no <em>parent tasks</em> to wait on, upstream in the graph.
Consequently all <code class="docutils literal notranslate"><span class="pre">buy_ingredients</span></code> tasks (out to a configurable
<a class="reference internal" href="../../glossary.html#term-runahead-limit"><span class="xref std std-term">runahead limit</span></a>) want to run straight away.
This could cause our bakery to run into cash-flow problems by purchasing
ingredients too far in advance of using them.</p>
<p>To solve this problem without running out of ingredients, the bakery wants
to purchase ingredients two batches ahead. This can be achieved by adding
the following dependency:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>[scheduling]
<span class="w"> </span>    cycling mode = integer
<span class="w"> </span>    initial cycle point = 1
<span class="w"> </span>    [[graph]]
<span class="w"> </span>        P1 = &quot;&quot;&quot;
<span class="w"> </span>            buy_ingredients =&gt; make_dough
<span class="w"> </span>            pre_heat_oven &amp; make_dough =&gt; bake_bread
<span class="w"> </span>            bake_bread =&gt; sell_bread &amp; clean_oven
<span class="w"> </span>            clean_oven[-P1] =&gt; pre_heat_oven
<span class="gi">+            sell_bread[-P2] =&gt; buy_ingredients</span>
<span class="w"> </span>        &quot;&quot;&quot;
</pre></div>
</div>
<p>This means that <code class="docutils literal notranslate"><span class="pre">buy_ingredients</span></code> will run after the <code class="docutils literal notranslate"><span class="pre">sell_bread</span></code> task
two cycles earlier.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">[-P2]</span></code> suffix references a task two cycles back. For the first two
cycles this doesn’t make sense, so those dependencies (and indeed any before
the initial cycle point) will be ignored.</p>
</div>
<div align="center" class="align-center"><div class="graphviz"><object data="../../_images/graphviz-e0054d6b31d1071b99e7fe278d0ac5efbadd46a8.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph example {
size = &quot;4.5,15&quot;

subgraph cluster_1 {
    label = 1
    style = dashed
    &quot;1/pur&quot; [label=&quot;buy_ingredients\n1&quot;]
    &quot;1/mak&quot; [label=&quot;make_dough\n1&quot;]
    &quot;1/bak&quot; [label=&quot;bake_bread\n1&quot;]
    &quot;1/sel&quot; [label=&quot;sell_bread\n1&quot;]
    &quot;1/cle&quot; [label=&quot;clean_oven\n1&quot;]
    &quot;1/pre&quot; [label=&quot;pre_heat_oven\n1&quot;]
}

subgraph cluster_2 {
    label = 2
    style = dashed
    &quot;2/pur&quot; [label=&quot;buy_ingredients\n2&quot;]
    &quot;2/mak&quot; [label=&quot;make_dough\n2&quot;]
    &quot;2/bak&quot; [label=&quot;bake_bread\n2&quot;]
    &quot;2/sel&quot; [label=&quot;sell_bread\n2&quot;]
    &quot;2/cle&quot; [label=&quot;clean_oven\n2&quot;]
    &quot;2/pre&quot; [label=&quot;pre_heat_oven\n2&quot;]
}

subgraph cluster_3 {
    label = 3
    style = dashed
    &quot;3/pur&quot; [label=&quot;buy_ingredients\n3&quot;]
    &quot;3/mak&quot; [label=&quot;make_dough\n3&quot;]
    &quot;3/bak&quot; [label=&quot;bake_bread\n3&quot;]
    &quot;3/sel&quot; [label=&quot;sell_bread\n3&quot;]
    &quot;3/cle&quot; [label=&quot;clean_oven\n3&quot;]
    &quot;3/pre&quot; [label=&quot;pre_heat_oven\n3&quot;]
}

subgraph cluster_4 {
    label = 4
    style = dashed
    &quot;4/pur&quot; [label=&quot;buy_ingredients\n4&quot;]
    &quot;4/mak&quot; [label=&quot;make_dough\n4&quot;]
    &quot;4/bak&quot; [label=&quot;bake_bread\n4&quot;]
    &quot;4/sel&quot; [label=&quot;sell_bread\n4&quot;]
    &quot;4/cle&quot; [label=&quot;clean_oven\n4&quot;]
    &quot;4/pre&quot; [label=&quot;pre_heat_oven\n4&quot;]
}

&quot;1/pur&quot; -&gt; &quot;1/mak&quot; -&gt; &quot;1/bak&quot; -&gt; &quot;1/sel&quot;
&quot;1/pre&quot; -&gt; &quot;1/bak&quot; -&gt; &quot;1/cle&quot;
&quot;1/cle&quot; -&gt; &quot;2/pre&quot;
&quot;1/sel&quot; -&gt; &quot;3/pur&quot;
&quot;2/pur&quot; -&gt; &quot;2/mak&quot; -&gt; &quot;2/bak&quot; -&gt; &quot;2/sel&quot;
&quot;2/pre&quot; -&gt; &quot;2/bak&quot; -&gt; &quot;2/cle&quot;
&quot;2/cle&quot; -&gt; &quot;3/pre&quot;
&quot;2/sel&quot; -&gt; &quot;4/pur&quot;
&quot;3/pur&quot; -&gt; &quot;3/mak&quot; -&gt; &quot;3/bak&quot; -&gt; &quot;3/sel&quot;
&quot;3/pre&quot; -&gt; &quot;3/bak&quot; -&gt; &quot;3/cle&quot;
&quot;3/cle&quot; -&gt; &quot;4/pre&quot;
&quot;4/pur&quot; -&gt; &quot;4/mak&quot; -&gt; &quot;4/bak&quot; -&gt; &quot;4/sel&quot;
&quot;4/pre&quot; -&gt; &quot;4/bak&quot; -&gt; &quot;4/cle&quot;
}</p></object></div>
</div>
</section>
<section id="recurrence-sections">
<h2>Recurrence Sections<a class="headerlink" href="#recurrence-sections" title="Permalink to this heading"></a></h2>
<p>In the previous examples we used a
<code class="docutils literal notranslate"><span class="pre">P1</span></code><a class="reference internal" href="../../glossary.html#term-recurrence"><span class="xref std std-term">recurrence</span></a> to make the workflow repeat at successive integer
cycle points. Similarly <code class="docutils literal notranslate"><span class="pre">P2</span></code> means repeat every <em>other</em> cycle, and so
on. We can use multiple recurrences to build more complex workflows:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
   <span class="nv">cycling mode </span><span class="o">=</span><span class="s"> integer</span>
   <span class="nv">initial cycle point </span><span class="o">=</span><span class="s"> 1</span>
   <span class="nt">[[graph]]</span>
      <span class="c1"># Repeat every cycle.</span>
      <span class="nv">P1 </span><span class="o">=</span> <span class="kd">foo</span>
      <span class="c1"># Repeat every second cycle.</span>
      <span class="nv">P2 </span><span class="o">=</span> <span class="kd">bar</span>
      <span class="c1"># Repeat every third cycle.</span>
      <span class="nv">P3 </span><span class="o">=</span> <span class="kd">baz</span>
</pre></div>
</div>
<img alt="../../_images/recurrence-sections.svg" class="align-center" src="../../_images/recurrence-sections.svg" /><p>We can also tell Cylc where to start a recurrence sequence.</p>
<dl class="simple">
<dt>From the initial cycle point:</dt><dd><p>By default, recurrences start at the: <a class="reference internal" href="../../glossary.html#term-initial-cycle-point"><span class="xref std std-term">initial cycle point</span></a>.</p>
</dd>
<dt>From an arbitrary cycle point:</dt><dd><p>We can give a different start point like this:
<code class="docutils literal notranslate"><span class="pre">5/P3</span></code> means repeat every third cycle, starting from cycle number 5.
To run a graph at every other cycle point, use <code class="docutils literal notranslate"><span class="pre">2/P2</span></code>.</p>
</dd>
<dt>Offset from the initial cycle point:</dt><dd><p>The start point of a recurrence can also be defined as an offset from the
<a class="reference internal" href="../../glossary.html#term-initial-cycle-point"><span class="xref std std-term">initial cycle point</span></a> For example, <code class="docutils literal notranslate"><span class="pre">+P5/P3</span></code> means repeat every
third cycle from 5 cycles <em>after</em> the initial cycle point.</p>
</dd>
</dl>
<div class="note admonition" id="basic-cycling-practical">
<p class="admonition-title">Practical</p>
<p class="rubric">In this practical we will turn the <a class="reference internal" href="../../glossary.html#term-workflow"><span class="xref std std-term">workflow</span></a>
of the previous section into a <a class="reference internal" href="../../glossary.html#term-cycling"><span class="xref std std-term">cycling workflow</span></a>.</p>
<p>If you have not completed the previous practical use the following code for
your <a class="reference internal" href="../../reference/config/workflow.html#flow.cylc" title="flow.cylc"><code class="xref cylc cylc-conf docutils literal notranslate"><span class="pre">flow.cylc</span></code></a> file.</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduler]</span>
    <span class="nv">allow implicit tasks </span><span class="o">=</span><span class="s"> True</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[graph]]</span>
        <span class="nv">R1 </span><span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
            <span class="kd">a</span> <span class="o">&amp;</span> <span class="kd">c</span> <span class="o">=&gt;</span> <span class="kd">b</span> <span class="o">=&gt;</span> <span class="kd">d</span> <span class="o">&amp;</span> <span class="kd">f</span>
            <span class="kd">d</span> <span class="o">=&gt;</span> <span class="kd">e</span>
        <span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
<ol class="arabic">
<li><p><strong>Create a new workflow.</strong></p>
<p>Create a new source directory <code class="docutils literal notranslate"><span class="pre">integer-cycling</span></code> under <code class="docutils literal notranslate"><span class="pre">~/cylc-src/</span></code>,
and move into it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/cylc-src/integer-cycling
<span class="nb">cd</span><span class="w"> </span>~/cylc-src/integer-cycling
</pre></div>
</div>
<p>Copy the above code into a <a class="reference internal" href="../../reference/config/workflow.html#flow.cylc" title="flow.cylc"><code class="xref cylc cylc-conf docutils literal notranslate"><span class="pre">flow.cylc</span></code></a> file in that directory.</p>
</li>
<li><p><strong>Make the workflow cycle.</strong></p>
<p>Add the following lines to your <code class="docutils literal notranslate"><span class="pre">flow.cylc</span></code> file:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>[scheduling]
<span class="gi">+    cycling mode = integer</span>
<span class="gi">+    initial cycle point = 1</span>
<span class="w"> </span>    [[graph]]
<span class="gd">-        R1 = &quot;&quot;&quot;</span>
<span class="gi">+        P1 = &quot;&quot;&quot;</span>
<span class="w"> </span>            a &amp; c =&gt; b =&gt; d &amp; f
<span class="w"> </span>            d =&gt; e
<span class="w"> </span>        &quot;&quot;&quot;
</pre></div>
</div>
</li>
<li><p><strong>Visualise the workflow.</strong></p>
<p>Try visualising your workflow using <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">graph</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cylc graph .
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">-c</span></code> (<code class="docutils literal notranslate"><span class="pre">--cycles</span></code>) option
to draw a box around each cycle:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cylc graph -c .
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>By default <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">graph</span></code> displays the first three cycles of the graph,
but you can specify the range of cycles on the command line.
Here’s how to display cycles <code class="docutils literal notranslate"><span class="pre">1</span></code> through <code class="docutils literal notranslate"><span class="pre">5</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cylc graph . 1 5
</pre></div>
</div>
</div>
</li>
<li><p><strong>Add another recurrence.</strong></p>
<p>Suppose we wanted the <code class="docutils literal notranslate"><span class="pre">e</span></code> task to run every <em>other</em> cycle
as opposed to every cycle. We can do this by adding another
recurrence.</p>
<p>Make the following changes to your <a class="reference internal" href="../../reference/config/workflow.html#flow.cylc" title="flow.cylc"><code class="xref cylc cylc-conf docutils literal notranslate"><span class="pre">flow.cylc</span></code></a> file.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>[scheduling]
<span class="w"> </span>    cycling mode = integer
<span class="w"> </span>    initial cycle point = 1
<span class="w"> </span>    [[graph]]
<span class="w"> </span>        P1 = &quot;&quot;&quot;
<span class="w"> </span>            a &amp; c =&gt; b =&gt; d &amp; f
<span class="gd">-            d =&gt; e</span>
<span class="w"> </span>        &quot;&quot;&quot;
<span class="gi">+        P2 = &quot;&quot;&quot;</span>
<span class="gi">+            d =&gt; e</span>
<span class="gi">+        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">graph</span></code> to see the effect this has on the workflow.</p>
</li>
<li><p><strong>intercycle dependencies.</strong></p>
<p>Now we will add
three intercycle dependencies:</p>
<ol class="arabic simple">
<li><p>Between <code class="docutils literal notranslate"><span class="pre">f</span></code> from the previous cycle and <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p></li>
<li><p>Between <code class="docutils literal notranslate"><span class="pre">d</span></code> from the previous cycle and <code class="docutils literal notranslate"><span class="pre">a</span></code>
<em>every odd cycle</em> (e.g. 2/d =&gt; 3/a).</p></li>
<li><p>Between <code class="docutils literal notranslate"><span class="pre">e</span></code> from the previous cycle and <code class="docutils literal notranslate"><span class="pre">a</span></code>
<em>every even cycle</em> (e.g. 1/e =&gt; 2/a).</p></li>
</ol>
<p>Try adding these to your <a class="reference internal" href="../../reference/config/workflow.html#flow.cylc" title="flow.cylc"><code class="xref cylc cylc-conf docutils literal notranslate"><span class="pre">flow.cylc</span></code></a> file to
make your workflow match the diagram below.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">P2</span></code> means every other cycle, from the initial cycle point.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2/P2</span></code> means every other cycle, from cycle point 2.</p></li>
</ul>
</div>
<div align="center" class="align-center"><div class="graphviz"><object data="../../_images/graphviz-aca8d285197e57a400e199c11a8dce9f5229b6a0.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph example {
 size = &quot;4.5,7&quot;

 subgraph cluster_1 {
     label = 1
     style = dashed
     &quot;1/a&quot; [label=&quot;a\n1&quot;]
     &quot;1/b&quot; [label=&quot;b\n1&quot;]
     &quot;1/d&quot; [label=&quot;d\n1&quot;]
     &quot;1/f&quot; [label=&quot;f\n1&quot;]
     &quot;1/c&quot; [label=&quot;c\n1&quot;]
     &quot;1/e&quot; [label=&quot;e\n1&quot;]
 }

 subgraph cluster_2 {
     label = 2
     style = dashed
     &quot;2/a&quot; [label=&quot;a\n2&quot;]
     &quot;2/b&quot; [label=&quot;b\n2&quot;]
     &quot;2/d&quot; [label=&quot;d\n2&quot;]
     &quot;2/f&quot; [label=&quot;f\n2&quot;]
     &quot;2/c&quot; [label=&quot;c\n2&quot;]
 }

 subgraph cluster_3 {
     label = 3
     style = dashed
     &quot;3/a&quot; [label=&quot;a\n3&quot;]
     &quot;3/b&quot; [label=&quot;b\n3&quot;]
     &quot;3/d&quot; [label=&quot;d\n3&quot;]
     &quot;3/f&quot; [label=&quot;f\n3&quot;]
     &quot;3/c&quot; [label=&quot;c\n3&quot;]
     &quot;3/e&quot; [label=&quot;e\n3&quot;]
 }

 &quot;1/a&quot; -&gt; &quot;1/b&quot; -&gt; &quot;1/f&quot;
 &quot;1/b&quot; -&gt; &quot;1/d&quot;
 &quot;1/c&quot; -&gt; &quot;1/b&quot;
 &quot;2/a&quot; -&gt; &quot;2/b&quot; -&gt; &quot;2/f&quot;
 &quot;2/b&quot; -&gt; &quot;2/d&quot;
 &quot;2/c&quot; -&gt; &quot;2/b&quot;
 &quot;3/a&quot; -&gt; &quot;3/b&quot; -&gt; &quot;3/f&quot;
 &quot;3/b&quot; -&gt; &quot;3/d&quot;
 &quot;3/c&quot; -&gt; &quot;3/b&quot;
 &quot;1/d&quot; -&gt; &quot;1/e&quot; -&gt; &quot;2/a&quot;
 &quot;3/d&quot; -&gt; &quot;3/e&quot;
 &quot;2/d&quot; -&gt; &quot;3/a&quot;
 &quot;1/f&quot; -&gt; &quot;2/c&quot;
 &quot;2/f&quot; -&gt; &quot;3/c&quot;
}</p></object></div>
</div>
<div class="spoiler warning admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduler]</span>
    <span class="nv">allow implicit tasks </span><span class="o">=</span><span class="s"> True</span>
<span class="nt">[scheduling]</span>
    <span class="nv">cycling mode </span><span class="o">=</span><span class="s"> integer</span>
    <span class="nv">initial cycle point </span><span class="o">=</span><span class="s"> 1</span>
    <span class="nt">[[graph]]</span>
        <span class="nv">P1 </span><span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
            <span class="kd">a</span> <span class="o">&amp;</span> <span class="kd">c</span> <span class="o">=&gt;</span> <span class="kd">b</span> <span class="o">=&gt;</span> <span class="kd">d</span> <span class="o">&amp;</span> <span class="kd">f</span>
            <span class="kd">f</span>[<span class="nb">-P1</span>] <span class="o">=&gt;</span> <span class="kd">c</span>  <span class="c1"># (1)</span>
        <span class="s2">&quot;&quot;&quot;</span>
        <span class="nv">P2 </span><span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
            <span class="kd">d</span> <span class="o">=&gt;</span> <span class="kd">e</span>
            <span class="kd">d</span>[<span class="nb">-P1</span>] <span class="o">=&gt;</span> <span class="kd">a</span>  <span class="c1"># (2)</span>
        <span class="s2">&quot;&quot;&quot;</span>
        <span class="nv">2/P2 </span><span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
            <span class="kd">e</span>[<span class="nb">-P1</span>] <span class="o">=&gt;</span> <span class="kd">a</span>  <span class="c1"># (3)</span>
        <span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</li>
</ol>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="graphing.html" class="btn btn-neutral float-left" title="The flow.cylc File Format" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="datetime-cycling.html" class="btn btn-neutral float-right" title="Datetime Cycling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2008-2023 NIWA &amp; British Crown (Met Office) &amp; Contributors.
      <span class="lastupdated">Last updated on Apr 10, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!--
  element which gets populated with the list of available versions and
  formats for the documentation by versions.js
-->
<div
  class="rst-versions"
  data-toggle="rst-versions"
  id='versions-and-formats'
></div>




<script type="text/javascript">
    const CUR_FORMAT = "html";
    const CUR_VERSION = "8.2.5";
    // name of page (in URL), for singlepage builds this will be `index`
    const PAGE_NAME = "tutorial/scheduling/integer-cycling";
    // URL path to the base docs dir i.e. ROOT_DIR/version/format
    const ROOT_DIR = "../../../..";
</script>

<script
  type="text/javascript"
  src="../../../../versions.js"
></script><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
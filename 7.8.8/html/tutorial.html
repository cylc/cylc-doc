
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>7. Tutorial &#8212; The Cylc Suite Engine 7.8.8 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="_static/cylc-favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. Suite Name Registration" href="suite-name-reg.html" />
    <link rel="prev" title="6. Global (Site, User) Configuration Files" href="global-site-user-conf.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="suite-name-reg.html" title="8. Suite Name Registration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="global-site-user-conf.html" title="6. Global (Site, User) Configuration Files"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">The Cylc Suite Engine 7.8.8 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tutorial">
<span id="id1"></span><h1>7. Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>This section provides a hands-on tutorial introduction to basic cylc
functionality.</p>
<div class="section" id="user-config-file">
<h2>7.1. User Config File<a class="headerlink" href="#user-config-file" title="Permalink to this headline">¶</a></h2>
<p>Some settings affecting cylc’s behaviour can be defined in site and user
<em>global config files</em>. For example, to choose the text editor invoked by
cylc on suite configurations:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="c1"># $HOME/.cylc/$(cylc --version)/global.rc</span>
<span class="nt">[editors]</span>
    <span class="nv">terminal </span><span class="o">=</span><span class="s"> vim</span>
    <span class="nv">gui </span><span class="o">=</span><span class="s"> gvim -f</span>
</pre></div>
</div>
<ul class="simple">
<li>For more on site and user global config files
see <a class="reference internal" href="global-site-user-conf.html#siteanduserconfiguration"><span class="std std-ref">Global (Site, User) Configuration Files</span></a> and <a class="reference internal" href="appendices/site-user-config-ref.html#sitercreference"><span class="std std-ref">Global (Site, User) Config File Reference</span></a>.</li>
</ul>
<div class="section" id="configure-environment-on-job-hosts">
<span id="id2"></span><h3>7.1.1. Configure Environment on Job Hosts<a class="headerlink" href="#configure-environment-on-job-hosts" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference internal" href="installation.html#configure-site-environment-on-job-hosts"><span class="std std-ref">Configure Site Environment on Job Hosts</span></a> for information.</p>
</div>
</div>
<div class="section" id="user-interfaces">
<span id="cui"></span><h2>7.2. User Interfaces<a class="headerlink" href="#user-interfaces" title="Permalink to this headline">¶</a></h2>
<p>You should have access to the cylc command line (CLI) and graphical (GUI) user
interfaces once cylc has been installed as described in
Section <a class="reference internal" href="installation.html#installcylc"><span class="std std-ref">Installing Cylc</span></a>.</p>
<div class="section" id="command-line-interface-cli">
<h3>7.2.1. Command Line Interface (CLI)<a class="headerlink" href="#command-line-interface-cli" title="Permalink to this headline">¶</a></h3>
<p>The command line interface is unified under a single top level
<code class="docutils literal notranslate"><span class="pre">cylc</span></code> command that provides access to many sub-commands
and their help documentation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc <span class="nb">help</span>       <span class="c1"># Top level command help.</span>
$ cylc run --help <span class="c1"># Example command-specific help.</span>
</pre></div>
</div>
<p>Command help transcripts are printed in <a class="reference internal" href="appendices/command-ref.html#commandreference"><span class="std std-ref">Command Reference</span></a> and are
available from the GUI Help menu.</p>
<p>Cylc is <em>scriptable</em> - the error status returned by commands can be
relied on.</p>
</div>
<div class="section" id="graphical-user-interface-gui">
<h3>7.2.2. Graphical User Interface (GUI)<a class="headerlink" href="#graphical-user-interface-gui" title="Permalink to this headline">¶</a></h3>
<p>The cylc GUI covers the same functionality as the CLI, but it has more
sophisticated suite monitoring capability. It can start and stop suites, or
connect to suites that are already running; in either case, shutting down the
GUI does not affect the suite itself.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gcylc <span class="p">&amp;</span> <span class="c1"># or:</span>
$ cylc gui <span class="p">&amp;</span> <span class="c1"># Single suite control GUI.</span>
$ cylc gscan <span class="p">&amp;</span> <span class="c1"># Multi-suite monitor GUI.</span>
</pre></div>
</div>
<p>Clicking on a suite in gscan, shown in <a class="reference internal" href="screenshots.html#fig-gscan"><span class="std std-numref">Fig. 12</span></a>, opens a
gcylc instance for it.</p>
</div>
</div>
<div class="section" id="suite-configuration">
<h2>7.3. Suite Configuration<a class="headerlink" href="#suite-configuration" title="Permalink to this headline">¶</a></h2>
<p>Cylc suites are defined by extended-INI format <code class="docutils literal notranslate"><span class="pre">suite.rc</span></code>
files (the main file format extension is section nesting). These reside
in <em>suite configuration directories</em> that may also contain a
<code class="docutils literal notranslate"><span class="pre">bin</span></code> directory and any other suite-related files.</p>
<ul class="simple">
<li>For more on the suite configuration file format, see <a class="reference internal" href="suite-config.html#suitedefinition"><span class="std std-ref">Suite Configuration</span></a>
and <a class="reference internal" href="appendices/suiterc-config-ref.html#suitercreference"><span class="std std-ref">Suite.rc Reference</span></a>.</li>
</ul>
</div>
<div class="section" id="suite-registration">
<h2>7.4. Suite Registration<a class="headerlink" href="#suite-registration" title="Permalink to this headline">¶</a></h2>
<p>Suite registration creates a run directory (under <code class="docutils literal notranslate"><span class="pre">~/cylc-run/</span></code> by
default) and populates it with authentication files and a symbolic link to a
suite configuration directory. Cylc commands that parse suites can take
the file path or the suite name as input. Commands that interact with running
suites have to target the suite by name.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Target a suite by file path:</span>
$ cylc validate /path/to/my/suite/suite.rc
$ cylc graph /path/to/my/suite/suite.rc

<span class="c1"># Register a suite:</span>
$ cylc register my.suite /path/to/my/suite/

<span class="c1"># Target a suite by name:</span>
$ cylc graph my.suite
$ cylc validate my.suite
$ cylc run my.suite
$ cylc stop my.suite
<span class="c1"># etc.</span>
</pre></div>
</div>
</div>
<div class="section" id="suite-passphrases">
<span id="tutpassphrases"></span><h2>7.5. Suite Passphrases<a class="headerlink" href="#suite-passphrases" title="Permalink to this headline">¶</a></h2>
<p>Registration (above) also generates a suite-specific passphrase file under
<code class="docutils literal notranslate"><span class="pre">.service/</span></code> in the suite run directory. It is loaded by the suite
server program at start-up and used to authenticate connections from client
programs.</p>
<p>Possession of a suite’s passphrase file gives full control over it.
Without it, the information available to a client is determined by the suite’s
public access privilege level.</p>
<p>For more on connection authentication, suite passphrases, and public access,
see <a class="reference internal" href="running-suites.html#connectionauthentication"><span class="std std-ref">Client-Server Interaction</span></a>.</p>
</div>
<div class="section" id="import-the-example-suites">
<span id="importtheexamplesuites"></span><h2>7.6. Import The Example Suites<a class="headerlink" href="#import-the-example-suites" title="Permalink to this headline">¶</a></h2>
<p>Run the following command to copy cylc’s example suites and register them for
your own use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc import-examples /tmp
</pre></div>
</div>
</div>
<div class="section" id="rename-the-imported-tutorial-suites">
<h2>7.7. Rename The Imported Tutorial Suites<a class="headerlink" href="#rename-the-imported-tutorial-suites" title="Permalink to this headline">¶</a></h2>
<p>Suites can be renamed by simply renaming (i.e. moving) their run directories.
Make the tutorial suite names shorter, and print their locations with
<code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">print</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mv ~/cylc-run/examples/<span class="k">$(</span>cylc --version<span class="k">)</span>/tutorial ~/cylc-run/tut
$ cylc print -ya tut
tut/oneoff/jinja2  <span class="p">|</span> /tmp/cylc-examples/7.0.0/tutorial/oneoff/jinja2
tut/cycling/two    <span class="p">|</span> /tmp/cylc-examples/7.0.0/tutorial/cycling/two
tut/cycling/three  <span class="p">|</span> /tmp/cylc-examples/7.0.0/tutorial/cycling/three
<span class="c1"># ...</span>
</pre></div>
</div>
<p>See <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">print</span> <span class="pre">--help</span></code> for other display options.</p>
</div>
<div class="section" id="suite-validation">
<h2>7.8. Suite Validation<a class="headerlink" href="#suite-validation" title="Permalink to this headline">¶</a></h2>
<p>Suite configurations can be validated to detect syntax (and other) errors:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># pass:</span>
$ cylc validate tut/oneoff/basic
Valid <span class="k">for</span> cylc-6.0.0
$ <span class="nb">echo</span> <span class="nv">$?</span>
<span class="m">0</span>
<span class="c1"># fail:</span>
$ cylc validate my/bad/suite
Illegal item: <span class="o">[</span>scheduling<span class="o">]</span>special tusks
$ <span class="nb">echo</span> <span class="nv">$?</span>
<span class="m">1</span>
</pre></div>
</div>
</div>
<div class="section" id="hello-world-in-cylc">
<h2>7.9. Hello World in Cylc<a class="headerlink" href="#hello-world-in-cylc" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/basic</span></code></p>
<p>Here’s the traditional <em>Hello World</em> program rendered as a cylc
suite:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;The cylc Hello World! suite&quot;</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span><span class="c">&quot;</span>
<span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Hello World!&quot;</span>
</pre></div>
</div>
<p>Cylc suites feature a clean separation of scheduling configuration,
which determines <em>when</em> tasks are ready to run; and runtime
configuration, which determines <em>what</em> to run (and <em>where</em> and
<em>how</em> to run it) when a task is ready. In this example the
<code class="docutils literal notranslate"><span class="pre">[scheduling]</span></code> section defines a single task called
<code class="docutils literal notranslate"><span class="pre">hello</span></code> that triggers immediately when the suite starts
up. When the task finishes the suite shuts down. That this is a
<em>dependency graph</em> will be more obvious when more tasks are added.
Under the <code class="docutils literal notranslate"><span class="pre">[runtime]</span></code> section the
<code class="docutils literal notranslate"><span class="pre">script</span></code> item defines a simple inlined
implementation for <code class="docutils literal notranslate"><span class="pre">hello</span></code>: it sleeps for ten seconds,
then prints <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World!</span></code>, and exits. This ends up in a <em>job script</em>
generated by cylc to encapsulate the task (below) and,
thanks to some defaults designed to allow quick
prototyping of new suites, it is submitted to run as a background job on
the suite host. In fact cylc even provides a default task implementation
that makes the entire <code class="docutils literal notranslate"><span class="pre">[runtime]</span></code> section technically optional:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;The minimal complete runnable cylc suite&quot;</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">foo</span><span class="c">&quot;</span>
<span class="c1"># (actually, &#39;title&#39; is optional too ... and so is this comment)</span>
</pre></div>
</div>
<p>(the resulting <em>dummy task</em> just prints out some identifying
information and exits).</p>
</div>
<div class="section" id="editing-suites">
<h2>7.10. Editing Suites<a class="headerlink" href="#editing-suites" title="Permalink to this headline">¶</a></h2>
<p>The text editor invoked by Cylc on suite configurations is determined
by cylc site and user global config files, as shown above in <a class="reference internal" href="#cui"><span class="std std-ref">User Interfaces</span></a>.
Check that you have renamed the tutorial examples suites as described
just above and open the <em>Hello World</em> suite in your text editor:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc edit tut/oneoff/basic <span class="c1"># in-terminal</span>
$ cylc edit -g tut/oneoff/basic <span class="p">&amp;</span> <span class="c1"># or GUI</span>
</pre></div>
</div>
<p>Alternatively, start gcylc on the suite:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gcylc tut/oneoff/basic <span class="p">&amp;</span>
</pre></div>
</div>
<p>and choose <em>Suite</em> <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> <em>Edit</em> from the menu.</p>
<p>The editor will be invoked from within the suite configuration directory
for easy access to other suite files (in this case there are none). There are
syntax highlighting control files for several text editors under
<code class="docutils literal notranslate"><span class="pre">&lt;cylc-dir&gt;/etc/syntax/</span></code>; see in-file comments for installation
instructions.</p>
</div>
<div class="section" id="running-suites">
<span id="runningsuitescli"></span><h2>7.11. Running Suites<a class="headerlink" href="#running-suites" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cli">
<h3>7.11.1. CLI<a class="headerlink" href="#cli" title="Permalink to this headline">¶</a></h3>
<p>Run <code class="docutils literal notranslate"><span class="pre">tut/oneoff/basic</span></code> using the <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">run</span></code> command.
As a suite runs detailed timestamped information is written to a <em>suite log</em>
and progress can be followed with cylc’s suite monitoring tools (below).
By default a suite server program daemonizes after printing a short message so
that you can exit the terminal or even log out without killing the suite:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc run tut/oneoff/basic
            ._.
            <span class="p">|</span> <span class="p">|</span>                 The Cylc Suite Engine <span class="o">[</span><span class="m">7</span>.0.0<span class="o">]</span>
._____._. ._<span class="p">|</span> <span class="p">|</span>_____.           Copyright <span class="o">(</span>C<span class="o">)</span> NIWA <span class="p">&amp;</span> British Crown <span class="o">(</span>Met Office<span class="o">)</span> <span class="p">&amp;</span> Contributors.
<span class="p">|</span> .___<span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> .___<span class="p">|</span>  _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
<span class="p">|</span> !___<span class="p">|</span> !_! <span class="p">|</span> <span class="p">|</span> !___.  This program comes with ABSOLUTELY NO WARRANTY<span class="p">;</span>
!_____!___. <span class="p">|</span>_!_____!  see <span class="sb">`</span>cylc warranty<span class="sb">`</span>.  It is free software, you
      .___! <span class="p">|</span>           are welcome to redistribute it under certain
      !_____!                conditions<span class="p">;</span> see <span class="sb">`</span>cylc conditions<span class="sb">`</span>.

*** listening on https://nwp-1:43027/ ***

To view suite server program contact information:
 $ cylc get-suite-contact tut/oneoff/basic

Other ways to see <span class="k">if</span> the suite is still running:
 $ cylc scan -n <span class="s1">&#39;\btut/oneoff/basic\b&#39;</span> nwp-1
 $ cylc ping -v --host<span class="o">=</span>nwp-1 tut/oneoff/basic
 $ ps h -opid,args <span class="m">123456</span>  <span class="c1"># on nwp-1</span>
</pre></div>
</div>
<p>If you’re quick enough (this example only takes 10-15 seconds to run) the
<code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">scan</span></code> command will detect the running suite:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc scan
tut/oneoff/basic oliverh@nwp-1:43027
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use the <code class="docutils literal notranslate"><span class="pre">--no-detach</span></code> and <code class="docutils literal notranslate"><span class="pre">--debug</span></code> options
to <code class="docutils literal notranslate"><span class="pre">cylc-run</span></code> to prevent the suite from daemonizing (i.e. to make
it stay attached to your terminal until it exits).</p>
</div>
<p>When a task is ready cylc generates a <em>job script</em> to run it, by
default as a background jobs on the suite host.  The job process ID is
captured, and job output is directed to log files in standard
locations under the suite run directory.</p>
<p>Log file locations relative to the suite run directory look like
<code class="docutils literal notranslate"><span class="pre">job/1/hello/01/</span></code> where the first digit is the <em>cycle point</em> of
the task <code class="docutils literal notranslate"><span class="pre">hello</span></code> (for non-cycling tasks this is just <code class="docutils literal notranslate"><span class="pre">1</span></code>); and the
final <code class="docutils literal notranslate"><span class="pre">01</span></code> is the <em>submit number</em> (so that job logs do not get
overwritten if a job is resubmitted for any reason).</p>
<p>The suite shuts down automatically once all tasks have succeeded.</p>
</div>
<div class="section" id="gui">
<h3>7.11.2. GUI<a class="headerlink" href="#gui" title="Permalink to this headline">¶</a></h3>
<p>The cylc GUI can start and stop suites, or (re)connect to suites that
are already running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc gui tut/oneoff/basic <span class="p">&amp;</span>
</pre></div>
</div>
<p>Use the tool bar <em>Play</em> button, or the <em>Control</em> <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> <em>Run</em> menu item, to
run the suite again. You may want to alter the suite configuration slightly
to make the task take longer to run. Try right-clicking on the
<code class="docutils literal notranslate"><span class="pre">hello</span></code> task to view its output logs. The relative merits of the three
<em>suite views</em> - dot, text, and graph - will be more apparent later when we
have more tasks. Closing the GUI does not affect the suite itself.</p>
</div>
</div>
<div class="section" id="remote-suites">
<span id="remotesuites"></span><h2>7.12. Remote Suites<a class="headerlink" href="#remote-suites" title="Permalink to this headline">¶</a></h2>
<p>Suites can run on <em>localhost</em> or on a <em>remote</em> host.</p>
<p>To start up a suite on a given host, specify it explicitly via the
<code class="docutils literal notranslate"><span class="pre">--host=</span></code> option to a <code class="docutils literal notranslate"><span class="pre">run</span></code> or <code class="docutils literal notranslate"><span class="pre">restart</span></code> command.</p>
<p>Otherwise, Cylc selects the best host to start up on from allowed
<code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">hosts</span></code> as specified in the global config under
<code class="docutils literal notranslate"><span class="pre">[suite</span> <span class="pre">servers]</span></code>, which defaults to localhost. Should there be
more than one allowed host set, the <em>most suitable</em> is determined
according to the settings specified under <code class="docutils literal notranslate"><span class="pre">[[run</span> <span class="pre">host</span> <span class="pre">select]]</span></code>,
namely exclusion of hosts not meeting suitability <em>thresholds</em>, if
provided, then ranking according to the given <em>rank</em> method.</p>
</div>
<div class="section" id="discovering-running-suites">
<h2>7.13. Discovering Running Suites<a class="headerlink" href="#discovering-running-suites" title="Permalink to this headline">¶</a></h2>
<p>Suites that are currently running can be detected with command line or
GUI tools:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># list currently running suites and their port numbers:</span>
$ cylc scan
tut/oneoff/basic oliverh@nwp-1:43001

<span class="c1"># GUI summary view of running suites:</span>
$ cylc gscan <span class="p">&amp;</span>
</pre></div>
</div>
<p>The scan GUI is shown in <a class="reference internal" href="screenshots.html#fig-gscan"><span class="std std-numref">Fig. 12</span></a>; clicking on a suite in
it opens gcylc.</p>
</div>
<div class="section" id="task-identifiers">
<span id="taskidentifiers"></span><h2>7.14. Task Identifiers<a class="headerlink" href="#task-identifiers" title="Permalink to this headline">¶</a></h2>
<p>At run time, task instances are identified by their <em>name</em> (see
<a class="reference internal" href="suite-config.html#tasknames"><span class="std std-ref">Task and Namespace Names</span></a>), which is determined entirely by the suite configuration,
and a <em>cycle point</em> which is usually a date-time or an integer:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>foo.20100808T00Z   <span class="c1"># a task with a date-time cycle point</span>
bar.1              <span class="c1"># a task with an integer cycle point (could be non-cycling)</span>
</pre></div>
</div>
<p>Non-cycling tasks usually just have the cycle point <code class="docutils literal notranslate"><span class="pre">1</span></code>, but this
still has to be used to target the task instance with cylc commands.</p>
</div>
<div class="section" id="job-submission-how-tasks-are-executed">
<h2>7.15. Job Submission: How Tasks Are Executed<a class="headerlink" href="#job-submission-how-tasks-are-executed" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/jobsub</span></code></p>
<p>Task <em>job scripts</em> are generated by cylc to wrap the task implementation
specified in the suite configuration (environment, script, etc.) in
error trapping code, messaging calls to report task progress back to the suite
server program, and so forth. Job scripts are written to the <em>suite job log
directory</em> where they can be viewed alongside the job output logs. They
can be accessed at run time by right-clicking on the task in the cylc GUI, or
printed to the terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc cat-log tut/oneoff/basic hello.1
</pre></div>
</div>
<p>This command can also print the suite log (and stdout and stderr for suites
in daemon mode) and task stdout and stderr logs (see
<code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">cat-log</span> <span class="pre">--help</span></code>).</p>
<p>A new job script can also be generated on the fly for inspection:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc jobscript tut/oneoff/basic hello.1
</pre></div>
</div>
<p>Take a look at the job script generated for <code class="docutils literal notranslate"><span class="pre">hello.1</span></code> during
the suite run above. The custom scripting should be clearly visible
toward the bottom of the file.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">hello</span></code> task in the first tutorial suite defaults to
running as a background job on the suite host. To submit it to the Unix
<code class="docutils literal notranslate"><span class="pre">at</span></code> scheduler instead, configure its job submission settings
as in <code class="docutils literal notranslate"><span class="pre">tut/oneoff/jobsub</span></code>:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Hello World!&quot;</span>
        <span class="nt">[[[job]]]</span>
            <span class="nv">batch system </span><span class="o">=</span><span class="s"> at</span>
</pre></div>
</div>
<p>Run the suite again after checking that <code class="docutils literal notranslate"><span class="pre">at</span></code> is running on your
system.</p>
<p>Cylc supports a number of different batch systems. Tasks
submitted to external batch queuing systems like <code class="docutils literal notranslate"><span class="pre">at</span></code>,
<code class="docutils literal notranslate"><span class="pre">PBS</span></code>, <code class="docutils literal notranslate"><span class="pre">SLURM</span></code>, <code class="docutils literal notranslate"><span class="pre">Moab</span></code>, or <code class="docutils literal notranslate"><span class="pre">LoadLeveler</span></code>, are displayed as
<em>submitted</em> in the cylc GUI until they start executing.</p>
<ul class="simple">
<li>For more on task job scripts, see <a class="reference internal" href="task-implementation.html#jobscripts"><span class="std std-ref">Task Job Scripts</span></a>.</li>
<li>For more on batch systems, see <a class="reference internal" href="task-job-submission.html#availablemethods"><span class="std std-ref">Supported Job Submission Methods</span></a>.</li>
</ul>
</div>
<div class="section" id="locating-suite-and-task-output">
<h2>7.16. Locating Suite And Task Output<a class="headerlink" href="#locating-suite-and-task-output" title="Permalink to this headline">¶</a></h2>
<p>If the <code class="docutils literal notranslate"><span class="pre">--no-detach</span></code> option is not used, suite stdout and
stderr will be directed to the suite run directory along with the
time-stamped suite log file, and task job scripts and job logs
(task stdout and stderr). The default suite run directory location is
<code class="docutils literal notranslate"><span class="pre">$HOME/cylc-run</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tree <span class="nv">$HOME</span>/cylc-run/tut/oneoff/basic/
<span class="p">|</span>-- .service              <span class="c1"># location of run time service files</span>
<span class="p">|</span>    <span class="p">|</span>-- contact          <span class="c1"># detail on how to contact the running suite</span>
<span class="p">|</span>    <span class="p">|</span>-- db               <span class="c1"># private suite run database</span>
<span class="p">|</span>    <span class="p">|</span>-- passphrase       <span class="c1"># passphrase for client authentication</span>
<span class="p">|</span>    <span class="p">|</span>-- <span class="nb">source</span>           <span class="c1"># symbolic link to source directory</span>
<span class="p">|</span>    <span class="p">|</span>-- ssl.cert         <span class="c1"># SSL certificate for the suite server</span>
<span class="p">|</span>    <span class="sb">`</span>-- ssl.pem          <span class="c1"># SSL private key</span>
<span class="p">|</span>-- cylc-suite.db         <span class="c1"># back compat symlink to public suite run database</span>
<span class="p">|</span>-- share                 <span class="c1"># suite share directory (not used in this example)</span>
<span class="p">|</span>-- work                  <span class="c1"># task work space (sub-dirs are deleted if not used)</span>
<span class="p">|</span>    <span class="sb">`</span>-- <span class="m">1</span>                   <span class="c1"># task cycle point directory (or 1)</span>
<span class="p">|</span>        <span class="sb">`</span>-- hello              <span class="c1"># task work directory (deleted if not used)</span>
<span class="p">|</span>-- log                   <span class="c1"># suite log directory</span>
<span class="p">|</span>   <span class="p">|</span>-- db                   <span class="c1"># public suite run database</span>
<span class="p">|</span>   <span class="p">|</span>-- job                  <span class="c1"># task job log directory</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="sb">`</span>-- <span class="m">1</span>                   <span class="c1"># task cycle point directory (or 1)</span>
<span class="p">|</span>   <span class="p">|</span>       <span class="sb">`</span>-- hello              <span class="c1"># task name</span>
<span class="p">|</span>   <span class="p">|</span>           <span class="p">|</span>-- <span class="m">01</span>                <span class="c1"># task submission number</span>
<span class="p">|</span>   <span class="p">|</span>           <span class="p">|</span>   <span class="p">|</span>-- job              <span class="c1"># task job script</span>
<span class="p">|</span>   <span class="p">|</span>           <span class="p">|</span>   <span class="sb">`</span>-- job-activity.log <span class="c1"># task job activity log</span>
<span class="p">|</span>   <span class="p">|</span>           <span class="p">|</span>   <span class="p">|</span>-- job.err          <span class="c1"># task stderr log</span>
<span class="p">|</span>   <span class="p">|</span>           <span class="p">|</span>   <span class="p">|</span>-- job.out          <span class="c1"># task stdout log</span>
<span class="p">|</span>   <span class="p">|</span>           <span class="p">|</span>   <span class="sb">`</span>-- job.status       <span class="c1"># task status file</span>
<span class="p">|</span>   <span class="p">|</span>           <span class="sb">`</span>-- NN -&gt; <span class="m">01</span>          <span class="c1"># symlink to latest submission number</span>
<span class="p">|</span>   <span class="sb">`</span>-- suite                <span class="c1"># suite server log directory</span>
<span class="p">|</span>       <span class="p">|</span>-- err                 <span class="c1"># suite server stderr log (daemon mode only)</span>
<span class="p">|</span>       <span class="p">|</span>-- out                 <span class="c1"># suite server stdout log (daemon mode only)</span>
<span class="p">|</span>       <span class="sb">`</span>-- log                 <span class="c1"># suite server event log (timestamped info)</span>
</pre></div>
</div>
<p>The suite run database files, suite environment file,
and task status files are used internally by cylc. Tasks execute in
private <code class="docutils literal notranslate"><span class="pre">work/</span></code> directories that are deleted automatically
if empty when the task finishes. The suite
<code class="docutils literal notranslate"><span class="pre">share/</span></code> directory is made available to all tasks (by
<code class="docutils literal notranslate"><span class="pre">$CYLC_SUITE_SHARE_DIR</span></code>) as a common share space. The task submission
number increments from <code class="docutils literal notranslate"><span class="pre">1</span></code> if a task retries; this is used as a
sub-directory of the log tree to avoid overwriting log files from earlier
job submissions.</p>
<p>The top level run directory location can be changed in site and user
config files if necessary, and the suite share and work locations can be
configured separately because of the potentially larger disk space
requirement.</p>
<p>Task job logs can be viewed by right-clicking on tasks in the gcylc
GUI (so long as the task proxy is live in the suite), manually
accessed from the log directory (of course), or printed to the terminal
with the <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">cat-log</span></code> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># suite logs:</span>
$ cylc cat-log    tut/oneoff/basic           <span class="c1"># suite event log</span>
$ cylc cat-log -o tut/oneoff/basic           <span class="c1"># suite stdout log</span>
$ cylc cat-log -e tut/oneoff/basic           <span class="c1"># suite stderr log</span>
<span class="c1"># task logs:</span>
$ cylc cat-log    tut/oneoff/basic hello.1   <span class="c1"># task job script</span>
$ cylc cat-log -o tut/oneoff/basic hello.1   <span class="c1"># task stdout log</span>
$ cylc cat-log -e tut/oneoff/basic hello.1   <span class="c1"># task stderr log</span>
</pre></div>
</div>
<ul class="simple">
<li>For a web-based interface to suite and task logs (and much more),
see <em>Rose</em> in <a class="reference internal" href="suite-storage-etc.html#suitestorageetc"><span class="std std-ref">Suite Storage, Discovery, Revision Control, and Deployment</span></a>.</li>
<li>For more on environment variables supplied to tasks, such as
<code class="docutils literal notranslate"><span class="pre">$CYLC_SUITE_SHARE_DIR</span></code>, see <a class="reference internal" href="suite-config.html#taskexecutionenvironment"><span class="std std-ref">Task Execution Environment</span></a>.</li>
</ul>
</div>
<div class="section" id="viewing-suite-logs-in-a-web-browser-cylc-review">
<span id="viewingsuitelogscylcreview"></span><h2>7.17. Viewing Suite Logs in a Web Browser: Cylc Review<a class="headerlink" href="#viewing-suite-logs-in-a-web-browser-cylc-review" title="Permalink to this headline">¶</a></h2>
<p>The Cylc Review web service displays suite job logs and other information in
web pages, as shown in <a class="reference internal" href="#fig-review-screenshot"><span class="std std-numref">Fig. 14</span></a>. It can run under a
WSGI server (e.g. Apache with <code class="docutils literal notranslate"><span class="pre">mod_wsgi</span></code>) as a service for all
users, or as an ad hoc service under your own user account.</p>
<p>If a central Cylc Review service has been set up at your site (e.g. as
described in <a class="reference internal" href="installation.html#configuringcylcreviewapache"><span class="std std-ref">Configuring Cylc Review Under Apache</span></a>) the URL will typically be
something like <code class="docutils literal notranslate"><span class="pre">http://&lt;server&gt;/cylc-review/</span></code>.</p>
<div class="figure align-center" id="id4">
<span id="fig-review-screenshot"></span><img alt="_images/cylc-review-screenshot.png" src="_images/cylc-review-screenshot.png" />
<p class="caption"><span class="caption-number">Fig. 14 </span><span class="caption-text">Screenshot of a Cylc Review web page</span></p>
</div>
<p>Otherwise, to start an ad hoc Cylc Review service to view your own suite logs
(or those of others, if you have read access to them), run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>setsid cylc review start 0&lt;/dev/null 1&gt;/dev/null 2&gt;&amp;1 &amp;
</pre></div>
</div>
<p>The service should start at <code class="docutils literal notranslate"><span class="pre">http://&lt;server&gt;:8080</span></code> (the port number
can optionally be set on the command line). Service logs are written to
<code class="docutils literal notranslate"><span class="pre">~/.cylc/cylc-review*</span></code>. Run <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">review</span></code> to view
status information, and <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">review</span> <span class="pre">stop</span></code> to stop the service.</p>
</div>
<div class="section" id="remote-tasks">
<span id="remotetasks"></span><h2>7.18. Remote Tasks<a class="headerlink" href="#remote-tasks" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/remote</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">hello</span></code> task in the first two tutorial suites defaults to
running on the suite host <a class="reference internal" href="#remotesuites"><span class="std std-ref">Remote Suites</span></a>. To make it run on a different
host instead change its runtime configuration as in <code class="docutils literal notranslate"><span class="pre">tut/oneoff/remote</span></code>:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Hello World!&quot;</span>
        <span class="nt">[[[remote]]]</span>
            <span class="nv">host </span><span class="o">=</span><span class="s"> server1.niwa.co.nz</span>
</pre></div>
</div>
<p>In general, a <em>task remote</em> is a user account, other than the account
running the suite server program, where a task job is submitted to run. It can
be on the same machine running the suite or on another machine.</p>
<p>A task remote account must satisfy several requirements:</p>
<ul class="simple">
<li>Non-interactive ssh must be enabled from the account running the suite
server program to the account for submitting (and managing) the remote
task job.</li>
<li>Network settings must allow communication <em>back</em> from the remote task
job to the suite, either by network ports or ssh, unless the last-resort one
way <em>task polling</em> communication method is used.</li>
<li>Cylc must be installed and runnable on the task remote account. Other
software dependencies like graphviz are not required there.</li>
<li>Any files needed by a remote task must be installed on the task
host. In this example there is nothing to install because the
implementation of <code class="docutils literal notranslate"><span class="pre">hello</span></code> is inlined in the suite configuration
and thus ends up entirely contained within the task job script.</li>
</ul>
<p>If your username is different on the task host, you can add a <code class="docutils literal notranslate"><span class="pre">User</span></code>
setting for the relevant host in your <code class="docutils literal notranslate"><span class="pre">~/.ssh/config</span></code>.
If you are unable to do so, the <code class="docutils literal notranslate"><span class="pre">[[[remote]]]</span></code> section also supports an
<code class="docutils literal notranslate"><span class="pre">owner=username</span></code> item.</p>
<p>If you configure a task account according to the requirements cylc will invoke
itself on the remote account (with a login shell by default) to create log
directories, transfer any essential service files, send the task job script
over, and submit it to run there by the configured batch system.</p>
<p>Remote task job logs are saved to the suite run directory on the task remote,
not on the account running the suite. They can be retrieved by right-clicking
on the task in the GUI, or to have cylc pull them back to the suite account
automatically do this:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Hello World!&quot;</span>
        <span class="nt">[[[remote]]]</span>
            <span class="nv">host </span><span class="o">=</span><span class="s"> server1.niwa.co.nz</span>
            <span class="nv">retrieve job logs </span><span class="o">=</span><span class="s"> True</span>
</pre></div>
</div>
<p>This suite will attempt to <code class="docutils literal notranslate"><span class="pre">rsync</span></code> job logs from the remote
host each time a task job completes.</p>
<p>Some batch systems have considerable delays between the time when the job
completes and when it writes the job logs in its normal location. If this is
the case, you can configure an initial delay and retry delays for job log
retrieval by setting some delays. E.g.:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Hello World!&quot;</span>
        <span class="nt">[[[remote]]]</span>
            <span class="nv">host </span><span class="o">=</span><span class="s"> server1.niwa.co.nz</span>
            <span class="nv">retrieve job logs </span><span class="o">=</span><span class="s"> True</span>
            <span class="c1"># Retry after 10 seconds, 1 minute and 3 minutes</span>
            <span class="nv">retrieve job logs retry delays </span><span class="o">=</span><span class="s"> PT10S, PT1M, PT3M</span>
</pre></div>
</div>
<p>Finally, if the disk space of the suite host is limited, you may want to set
<code class="docutils literal notranslate"><span class="pre">[[[remote]]]retrieve</span> <span class="pre">job</span> <span class="pre">logs</span> <span class="pre">max</span> <span class="pre">size=SIZE</span></code>. The value of SIZE can
be anything that is accepted by the <code class="docutils literal notranslate"><span class="pre">--max-size=SIZE</span></code> option of the
<code class="docutils literal notranslate"><span class="pre">rsync</span></code> command. E.g.:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Hello World!&quot;</span>
        <span class="nt">[[[remote]]]</span>
            <span class="nv">host </span><span class="o">=</span><span class="s"> server1.niwa.co.nz</span>
            <span class="nv">retrieve job logs </span><span class="o">=</span><span class="s"> True</span>
            <span class="c1"># Don&#39;t get anything bigger than 10MB</span>
            <span class="nv">retrieve job logs max size </span><span class="o">=</span><span class="s"> 10M</span>
</pre></div>
</div>
<p>It is worth noting that cylc uses the existence of a job’s <code class="docutils literal notranslate"><span class="pre">job.out</span></code>
or <code class="docutils literal notranslate"><span class="pre">job.err</span></code> in the local file system to indicate a successful job
log retrieval. If <code class="docutils literal notranslate"><span class="pre">retrieve</span> <span class="pre">job</span> <span class="pre">logs</span> <span class="pre">max</span> <span class="pre">size=SIZE</span></code> is set and both
<code class="docutils literal notranslate"><span class="pre">job.out</span></code> and <code class="docutils literal notranslate"><span class="pre">job.err</span></code> are bigger than <code class="docutils literal notranslate"><span class="pre">SIZE</span></code>
then cylc will consider the retrieval as failed. If retry delays are specified,
this will trigger some useless (but harmless) retries. If this occurs
regularly, you should try the following:</p>
<ul class="simple">
<li>Reduce the verbosity of STDOUT or STDERR from the task.</li>
<li>Redirect the verbosity from STDOUT or STDERR to an alternate log file.</li>
<li>Adjust the size limit with tolerance to the expected size of STDOUT or
STDERR.</li>
<li>For more on remote tasks see <a class="reference internal" href="suite-config.html#runningtasksonaremotehost"><span class="std std-ref">Remote Task Hosting</span></a></li>
<li>For more on task communications, see <a class="reference internal" href="running-suites.html#taskcomms"><span class="std std-ref">Tracking Task State</span></a>.</li>
<li>For more on suite passphrases and authentication,
see <a class="reference internal" href="#tutpassphrases"><span class="std std-ref">Suite Passphrases</span></a> and <a class="reference internal" href="running-suites.html#connectionauthentication"><span class="std std-ref">Client-Server Interaction</span></a>.</li>
</ul>
</div>
<div class="section" id="task-triggering">
<h2>7.19. Task Triggering<a class="headerlink" href="#task-triggering" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/goodbye</span></code></p>
<p>To make a second task called <code class="docutils literal notranslate"><span class="pre">goodbye</span></code> trigger after
<code class="docutils literal notranslate"><span class="pre">hello</span></code> finishes successfully, return to the original
example, <code class="docutils literal notranslate"><span class="pre">tut/oneoff/basic</span></code>, and change the suite graph
as in <code class="docutils literal notranslate"><span class="pre">tut/oneoff/goodbye</span></code>:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span> <span class="o">=&gt;</span> <span class="kd">goodbye</span><span class="c">&quot;</span>
</pre></div>
</div>
<p>or to trigger it at the same time as <code class="docutils literal notranslate"><span class="pre">hello</span></code>,</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span> <span class="o">&amp;</span> <span class="kd">goodbye</span><span class="c">&quot;</span>
</pre></div>
</div>
<p>and configure the new task’s behaviour under <code class="docutils literal notranslate"><span class="pre">[runtime]</span></code>:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[runtime]</span>
    <span class="nt">[[goodbye]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Goodbye World!&quot;</span>
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">tut/oneoff/goodbye</span></code> and check the output from the new task:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat ~/cylc-run/tut/oneoff/goodbye/log/job/1/goodbye/01/job.out
  <span class="c1"># or</span>
$ cylc cat-log -o tut/oneoff/goodbye goodbye.1
JOB SCRIPT STARTING
cylc <span class="o">(</span>scheduler - <span class="m">2014</span>-08-14T15:09:30+12<span class="o">)</span>: goodbye.1 started at <span class="m">2014</span>-08-14T15:09:30+12
cylc Suite and Task Identity:
  Suite Name  : tut/oneoff/goodbye
  Suite Host  : oliverh-34403dl.niwa.local
  Suite Port  : <span class="m">43001</span>
  Suite Owner : oliverh
  Task ID     : goodbye.1
  Task Host   : nwp-1
  Task Owner  : oliverh
  Task Try No.: <span class="m">1</span>

Goodbye World!
cylc <span class="o">(</span>scheduler - <span class="m">2014</span>-08-14T15:09:40+12<span class="o">)</span>: goodbye.1 succeeded at <span class="m">2014</span>-08-14T15:09:40+12
JOB SCRIPT EXITING <span class="o">(</span>TASK SUCCEEDED<span class="o">)</span>
</pre></div>
</div>
<div class="section" id="task-failure-and-suicide-triggering">
<h3>7.19.1. Task Failure And Suicide Triggering<a class="headerlink" href="#task-failure-and-suicide-triggering" title="Permalink to this headline">¶</a></h3>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/suicide</span></code></p>
<p>Task names in the graph string can be qualified with a state indicator
to trigger off task states other than success:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span>    <span class="nv">graph</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="kd">a</span> <span class="o">=&gt;</span> <span class="kd">b</span>        <span class="c1"># trigger b if a succeeds</span>
<span class="kd">c</span><span class="c">:</span><span class="kd">submit</span> <span class="o">=&gt;</span> <span class="kd">d</span> <span class="c1"># trigger d if c submits</span>
<span class="kd">e</span><span class="c">:</span><span class="kd">finish</span> <span class="o">=&gt;</span> <span class="kd">f</span> <span class="c1"># trigger f if e succeeds or fails</span>
<span class="kd">g</span><span class="c">:</span><span class="kd">start</span>  <span class="o">=&gt;</span> <span class="kd">h</span> <span class="c1"># trigger h if g starts executing</span>
<span class="kd">i</span><span class="c">:</span><span class="kd">fail</span>   <span class="o">=&gt;</span> <span class="kd">j</span> <span class="c1"># trigger j if i fails</span>
            <span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>A common use of this is to automate recovery from known modes of failure:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">goodbye</span><span class="c">:</span><span class="kd">fail</span> <span class="o">=&gt;</span> <span class="kd">really_goodbye</span><span class="c">&quot;</span>
</pre></div>
</div>
<p>i.e. if task <code class="docutils literal notranslate"><span class="pre">goodbye</span></code> fails, trigger another task that
(presumably) really says goodbye.</p>
<p>Failure triggering generally requires use of <em>suicide triggers</em> as
well, to remove the recovery task if it isn’t required (otherwise it
would hang about indefinitely in the waiting state):</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="kd">hello</span> <span class="o">=&gt;</span> <span class="kd">goodbye</span>
            <span class="kd">goodbye</span><span class="c">:</span><span class="kd">fail</span> <span class="o">=&gt;</span> <span class="kd">really_goodbye</span>
         <span class="kd">goodbye</span> <span class="o">=&gt;</span> <span class="x">!really_goodbye</span> <span class="c1"># suicide&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>This means if <code class="docutils literal notranslate"><span class="pre">goodbye</span></code> fails, trigger
<code class="docutils literal notranslate"><span class="pre">really_goodbye</span></code>; and otherwise, if <code class="docutils literal notranslate"><span class="pre">goodbye</span></code>
succeeds, remove <code class="docutils literal notranslate"><span class="pre">really_goodbye</span></code> from the suite.</p>
<p>Try running <code class="docutils literal notranslate"><span class="pre">tut/oneoff/suicide</span></code>, which also configures
the <code class="docutils literal notranslate"><span class="pre">hello</span></code> task’s runtime to make it fail, to see how this works.</p>
<ul class="simple">
<li>For more on suite dependency graphs see <a class="reference internal" href="suite-config.html#configuringscheduling"><span class="std std-ref">Scheduling - Dependency Graphs</span></a>.</li>
<li>For more on task triggering see <a class="reference internal" href="suite-config.html#triggertypes"><span class="std std-ref">Task Triggering</span></a>.</li>
</ul>
</div>
</div>
<div class="section" id="runtime-inheritance">
<h2>7.20. Runtime Inheritance<a class="headerlink" href="#runtime-inheritance" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/inherit</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">[runtime]</span></code> section is actually a <em>multiple inheritance</em> hierarchy.
Each subsection is a <em>namespace</em> that represents a task, or if it is
inherited by other namespaces, a <em>family</em>. This allows common configuration
to be factored out of related tasks very efficiently.</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;Simple runtime inheritance example&quot;</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span> <span class="o">=&gt;</span> <span class="kd">goodbye</span><span class="c">&quot;</span>
<span class="nt">[runtime]</span>
    <span class="nt">[[root]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo $GREETING World!&quot;</span>
    <span class="nt">[[hello]]</span>
        <span class="nt">[[[environment]]]</span>
            <span class="nv">GREETING </span><span class="o">=</span><span class="s"> Hello</span>
    <span class="nt">[[goodbye]]</span>
        <span class="nt">[[[environment]]]</span>
            <span class="nv">GREETING </span><span class="o">=</span><span class="s"> Goodbye</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">[root]</span></code> namespace provides defaults for all tasks in the suite.
Here both tasks inherit <code class="docutils literal notranslate"><span class="pre">script</span></code> from <code class="docutils literal notranslate"><span class="pre">root</span></code>, which they
customize with different values of the environment variable
<code class="docutils literal notranslate"><span class="pre">$GREETING</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Inheritance from <code class="docutils literal notranslate"><span class="pre">root</span></code> is
implicit; from other parents an explicit <code class="docutils literal notranslate"><span class="pre">inherit</span> <span class="pre">=</span> <span class="pre">PARENT</span></code>
is required, as shown below.</p>
</div>
<ul class="simple">
<li>For more on runtime inheritance, see <a class="reference internal" href="suite-config.html#niorp"><span class="std std-ref">Runtime - Task Configuration</span></a>.</li>
</ul>
</div>
<div class="section" id="triggering-families">
<h2>7.21. Triggering Families<a class="headerlink" href="#triggering-families" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/ftrigger1</span></code></p>
<p>Task families defined by runtime inheritance can also be used as
shorthand in graph trigger expressions. To see this, consider two
“greeter” tasks that trigger off another task <code class="docutils literal notranslate"><span class="pre">foo</span></code>:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">greeter_1</span> <span class="o">&amp;</span> <span class="kd">greeter_2</span><span class="c">&quot;</span>
</pre></div>
</div>
<p>If we put the common greeting functionality of <code class="docutils literal notranslate"><span class="pre">greeter_1</span></code>
and <code class="docutils literal notranslate"><span class="pre">greeter_2</span></code> into a special <code class="docutils literal notranslate"><span class="pre">GREETERS</span></code> family,
the graph can be expressed more efficiently like this:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">GREETERS</span><span class="c">&quot;</span>
</pre></div>
</div>
<p>i.e. if <code class="docutils literal notranslate"><span class="pre">foo</span></code> succeeds, trigger all members of
<code class="docutils literal notranslate"><span class="pre">GREETERS</span></code> at once. Here’s the full suite with runtime
hierarchy shown:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;Triggering a family of tasks&quot;</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">GREETERS</span><span class="c">&quot;</span>
<span class="nt">[runtime]</span>
    <span class="nt">[[root]]</span>
        <span class="nv">pre-script </span><span class="o">=</span><span class="s"> &quot;sleep 10&quot;</span>
    <span class="nt">[[foo]]</span>
        <span class="c1"># empty (creates a dummy task)</span>
    <span class="nt">[[GREETERS]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;echo $GREETING World!&quot;</span>
    <span class="nt">[[greeter_1]]</span>
        <span class="nv">inherit </span><span class="o">=</span><span class="s"> GREETERS</span>
        <span class="nt">[[[environment]]]</span>
            <span class="nv">GREETING </span><span class="o">=</span><span class="s"> Hello</span>
    <span class="nt">[[greeter_2]]</span>
        <span class="nv">inherit </span><span class="o">=</span><span class="s"> GREETERS</span>
        <span class="nt">[[[environment]]]</span>
            <span class="nv">GREETING </span><span class="o">=</span><span class="s"> Goodbye</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We recommend given ALL-CAPS names to task families to help
distinguish them from task names. However, this is just a convention.</p>
</div>
<p>Experiment with the <code class="docutils literal notranslate"><span class="pre">tut/oneoff/ftrigger1</span></code> suite to see
how this works.</p>
</div>
<div class="section" id="triggering-off-of-families">
<h2>7.22. Triggering Off Of Families<a class="headerlink" href="#triggering-off-of-families" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/ftrigger2</span></code></p>
<p>Tasks (or families) can also trigger <em>off</em> other families, but
in this case we need to specify what the trigger means in terms of
the upstream family members. Here’s how to trigger another task
<code class="docutils literal notranslate"><span class="pre">bar</span></code> if all members of <code class="docutils literal notranslate"><span class="pre">GREETERS</span></code> succeed:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">GREETERS</span>
            <span class="kd">GREETERS</span><span class="c">:</span><span class="kd">succeed</span><span class="c">-</span><span class="kd">all</span> <span class="o">=&gt;</span> <span class="kd">bar</span><span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Verbose validation in this case reports:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc val -v tut/oneoff/ftrigger2
...
Graph line substitutions occurred:
  IN: GREETERS:succeed-all <span class="o">=</span>&gt; bar
  OUT: greeter_1:succeed <span class="p">&amp;</span> greeter_2:succeed <span class="o">=</span>&gt; bar
...
</pre></div>
</div>
<p>Cylc ignores family member qualifiers like <code class="docutils literal notranslate"><span class="pre">succeed-all</span></code> on
the right side of a trigger arrow, where they don’t make sense, to
allow the two graph lines above to be combined in simple cases:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">GREETERS</span><span class="c">:</span><span class="kd">succeed</span><span class="c">-</span><span class="kd">all</span> <span class="o">=&gt;</span> <span class="kd">bar</span><span class="c">&quot;</span>
</pre></div>
</div>
<p>Any task triggering status qualified by <code class="docutils literal notranslate"><span class="pre">-all</span></code> or
<code class="docutils literal notranslate"><span class="pre">-any</span></code>, for the members, can be used with a family trigger.
For example, here’s how to trigger <code class="docutils literal notranslate"><span class="pre">bar</span></code> if all members
of <code class="docutils literal notranslate"><span class="pre">GREETERS</span></code> finish (succeed or fail) and any of them succeed:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">GREETERS</span>
    <span class="kd">GREETERS</span><span class="c">:</span><span class="kd">finish</span><span class="c">-</span><span class="kd">all</span> <span class="o">&amp;</span> <span class="kd">GREETERS</span><span class="c">:</span><span class="kd">succeed</span><span class="c">-</span><span class="kd">any</span> <span class="o">=&gt;</span> <span class="kd">bar</span><span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>(use of <code class="docutils literal notranslate"><span class="pre">GREETERS:succeed-any</span></code> by itself here would trigger
<code class="docutils literal notranslate"><span class="pre">bar</span></code> as soon as any one member of <code class="docutils literal notranslate"><span class="pre">GREETERS</span></code>
completed successfully). Verbose validation now begins to show how
family triggers can simplify complex graphs, even for this tiny
two-member family:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc val -v tut/oneoff/ftrigger2
...
Graph line substitutions occurred:
  IN: GREETERS:finish-all <span class="p">&amp;</span> GREETERS:succeed-any <span class="o">=</span>&gt; bar
  OUT: <span class="o">(</span> greeter_1:succeed <span class="p">|</span> greeter_1:fail <span class="o">)</span> <span class="p">&amp;</span> <span class="se">\</span>
       <span class="o">(</span> greeter_2:succeed <span class="p">|</span> greeter_2:fail <span class="o">)</span> <span class="p">&amp;</span> <span class="se">\</span>
       <span class="o">(</span> greeter_1:succeed <span class="p">|</span> greeter_2:succeed <span class="o">)</span> <span class="o">=</span>&gt; bar
...
</pre></div>
</div>
<p>Experiment with <code class="docutils literal notranslate"><span class="pre">tut/oneoff/ftrigger2</span></code> to see how this works.</p>
<ul class="simple">
<li>For more on family triggering, see <a class="reference internal" href="suite-config.html#familytriggers"><span class="std std-ref">Family Triggers</span></a>.</li>
</ul>
</div>
<div class="section" id="suite-visualization">
<h2>7.23. Suite Visualization<a class="headerlink" href="#suite-visualization" title="Permalink to this headline">¶</a></h2>
<p>You can style dependency graphs with an optional
<code class="docutils literal notranslate"><span class="pre">[visualization]</span></code> section, as shown in <code class="docutils literal notranslate"><span class="pre">tut/oneoff/ftrigger2</span></code>:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[visualization]</span>
    <span class="nv">default node attributes </span><span class="o">=</span><span class="s"> &quot;style=filled&quot;</span>
    <span class="nt">[[node attributes]]</span>
        <span class="nv">foo </span><span class="o">=</span><span class="s"> &quot;fillcolor=</span><span class="c1">#6789ab&quot;, &quot;color=magenta&quot;</span>
        <span class="nv">GREETERS </span><span class="o">=</span><span class="s"> &quot;fillcolor=</span><span class="c1">#ba9876&quot;</span>
        <span class="nv">bar </span><span class="o">=</span><span class="s"> &quot;fillcolor=</span><span class="c1">#89ab67&quot;</span>
</pre></div>
</div>
<p>To display the graph in an interactive viewer:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc graph tut/oneoff/ftrigger2 <span class="p">&amp;</span>    <span class="c1"># dependency graph</span>
$ cylc graph -n tut/oneoff/ftrigger2 <span class="p">&amp;</span> <span class="c1"># runtime inheritance graph</span>
</pre></div>
</div>
<p>It should look like <a class="reference internal" href="#fig-tut-hello-multi"><span class="std std-numref">Fig. 15</span></a> (with the
<code class="docutils literal notranslate"><span class="pre">GREETERS</span></code> family node expanded on the right).</p>
<div class="figure align-center" id="fig-tut-hello-multi">
<img alt="_images/tut-hello-multi-1.png" src="_images/tut-hello-multi-1.png" />
</div>
<div class="figure align-center">
<img alt="_images/tut-hello-multi-2.png" src="_images/tut-hello-multi-2.png" />
</div>
<div class="figure align-center" id="id5">
<img alt="_images/tut-hello-multi-3.png" src="_images/tut-hello-multi-3.png" />
<p class="caption"><span class="caption-number">Fig. 16 </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">tut/oneoff/ftrigger2</span></code> dependency and runtime inheritance graphs</span></p>
</div>
<p>Graph styling can be applied to entire families at once, and custom
“node groups” can also be defined for non-family groups.</p>
</div>
<div class="section" id="external-task-scripts">
<h2>7.24. External Task Scripts<a class="headerlink" href="#external-task-scripts" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/external</span></code></p>
<p>The tasks in our examples so far have all had inlined implementation, in
the suite configuration, but real tasks often need to call external
commands, scripts, or executables. To try this, let’s return to the
basic Hello World suite and cut the implementation of the task
<code class="docutils literal notranslate"><span class="pre">hello</span></code> out to a file <code class="docutils literal notranslate"><span class="pre">hello.sh</span></code> in the suite bin directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="nb">set</span> -e

<span class="nv">GREETING</span><span class="o">=</span><span class="si">${</span><span class="nv">GREETING</span><span class="k">:-</span><span class="nv">Goodbye</span><span class="si">}</span>
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$GREETING</span><span class="s2"> World! from </span><span class="nv">$0</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Make the task script executable, and change the <code class="docutils literal notranslate"><span class="pre">hello</span></code> task
runtime section to invoke it:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;Hello World! from an external task script&quot;</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span><span class="c">&quot;</span>
<span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">pre-script </span><span class="o">=</span><span class="s"> sleep 10</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> hello.sh</span>
        <span class="nt">[[[environment]]]</span>
            <span class="nv">GREETING </span><span class="o">=</span><span class="s"> Hello</span>
</pre></div>
</div>
<p>If you run the suite now the new greeting from the external task script
should appear in the <code class="docutils literal notranslate"><span class="pre">hello</span></code> task stdout log. This works
because cylc automatically adds the suite bin directory to
<code class="docutils literal notranslate"><span class="pre">$PATH</span></code> in the environment passed to tasks via their job
scripts. To execute scripts (etc.) located elsewhere you can
refer to the file by its full file path, or set <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>
appropriately yourself (this could be done via
<code class="docutils literal notranslate"><span class="pre">$HOME/.profile</span></code>, which is sourced at the top of the task job
script, or in the suite configuration itself).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The use of <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">-e</span></code> above to make the script abort on
error. This allows the error trapping code in the task job script to
automatically detect unforeseen errors.</p>
</div>
</div>
<div class="section" id="cycling-tasks">
<h2>7.25. Cycling Tasks<a class="headerlink" href="#cycling-tasks" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/cycling/one</span></code></p>
<p>So far we’ve considered non-cycling tasks, which finish without spawning
a successor.</p>
<p>Cycling is based around iterating through date-time or integer sequences. A
cycling task may run at each cycle point in a given sequence (cycle). For
example, a sequence might be a set of date-times every 6 hours starting from a
particular date-time. A cycling task may run for each date-time item (cycle
point) in that sequence.</p>
<p>There may be multiple instances of this type of task running in parallel, if
the opportunity arises and their dependencies allow it. Alternatively, a
sequence can be defined with only one valid cycle point - in that case, a task
belonging to that sequence may only run once.</p>
<p>Open the <code class="docutils literal notranslate"><span class="pre">tut/cycling/one</span></code> suite:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;Two cycling tasks, no inter-cycle dependence&quot;</span>
<span class="nt">[cylc]</span>
    <span class="nv">UTC mode </span><span class="o">=</span><span class="s"> True</span>
<span class="nt">[scheduling]</span>
    <span class="nv">initial cycle point </span><span class="o">=</span><span class="s"> 20130808T00</span>
    <span class="nv">final cycle point </span><span class="o">=</span><span class="s"> 20130812T00</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nt">[[[T00,T12]]]</span> <span class="c1"># 00 and 12 hours UTC every day</span>
            <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">bar</span><span class="c">&quot;</span>
<span class="nt">[visualization]</span>
    <span class="nv">initial cycle point </span><span class="o">=</span><span class="s"> 20130808T00</span>
    <span class="nv">final cycle point </span><span class="o">=</span><span class="s"> 20130809T00</span>
    <span class="nt">[[node attributes]]</span>
        <span class="nv">foo </span><span class="o">=</span><span class="s"> &quot;color=red&quot;</span>
        <span class="nv">bar </span><span class="o">=</span><span class="s"> &quot;color=blue&quot;</span>
</pre></div>
</div>
<p>The difference between cycling and non-cycling suites is all in the
<code class="docutils literal notranslate"><span class="pre">[scheduling]</span></code> section, so we will leave the
<code class="docutils literal notranslate"><span class="pre">[runtime]</span></code> section alone for now (this will result in
cycling dummy tasks).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The graph is now defined under a new section heading that makes each
task under it have a succession of cycle points ending in <code class="docutils literal notranslate"><span class="pre">00</span></code> or
<code class="docutils literal notranslate"><span class="pre">12</span></code> hours, between specified initial and final cycle
points (or indefinitely if no final cycle point is given), as shown in
<a class="reference internal" href="#fig-tut-one"><span class="std std-numref">Fig. 17</span></a>.</p>
</div>
<div class="figure align-center" id="id6">
<span id="fig-tut-one"></span><img alt="_images/tut-one.png" src="_images/tut-one.png" />
<p class="caption"><span class="caption-number">Fig. 17 </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">tut/cycling/one</span></code> suite</span></p>
</div>
<p>If you run this suite instances of <code class="docutils literal notranslate"><span class="pre">foo</span></code> will spawn in parallel out
to the <em>runahead limit</em>, and each <code class="docutils literal notranslate"><span class="pre">bar</span></code> will trigger off the
corresponding instance of <code class="docutils literal notranslate"><span class="pre">foo</span></code> at the same cycle point. The
runahead limit, which defaults to a few cycles but is configurable, prevents
uncontrolled spawning of cycling tasks in suites that are not constrained by
clock triggers in real time operation.</p>
<p>Experiment with <code class="docutils literal notranslate"><span class="pre">tut/cycling/one</span></code> to see how cycling tasks work.</p>
<div class="section" id="iso-8601-date-time-syntax">
<h3>7.25.1. ISO 8601 Date-Time Syntax<a class="headerlink" href="#iso-8601-date-time-syntax" title="Permalink to this headline">¶</a></h3>
<p>The suite above is a very simple example of a cycling date-time workflow. More
generally, cylc comprehensively supports the ISO 8601 standard for date-time
instants, intervals, and sequences. Cycling graph sections can be specified
using full ISO 8601 recurrence expressions, but these may be simplified
by assuming context information from the suite - namely initial and final cycle
points. One form of the recurrence syntax looks like
<code class="docutils literal notranslate"><span class="pre">Rn/start-date-time/period</span></code> (<code class="docutils literal notranslate"><span class="pre">Rn</span></code> means run <code class="docutils literal notranslate"><span class="pre">n</span></code> times). In the example
above, if the initial cycle point
is always at <code class="docutils literal notranslate"><span class="pre">00</span></code> or <code class="docutils literal notranslate"><span class="pre">12</span></code> hours then <code class="docutils literal notranslate"><span class="pre">[[[T00,T12]]]</span></code> could be
written as <code class="docutils literal notranslate"><span class="pre">[[[PT12H]]]</span></code>, which is short for
<code class="docutils literal notranslate"><span class="pre">[[[R/initial-cycle-point/PT12H/]]]</span></code> - i.e. run every 12 hours
indefinitely starting at the initial cycle point. It is possible to add
constraints to the suite to only allow initial cycle points at <code class="docutils literal notranslate"><span class="pre">00</span></code> or
<code class="docutils literal notranslate"><span class="pre">12</span></code> hours e.g.</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nv">initial cycle point </span><span class="o">=</span><span class="s"> 20130808T00</span>
    <span class="nv">initial cycle point constraints </span><span class="o">=</span><span class="s"> T00, T12</span>
</pre></div>
</div>
<ul class="simple">
<li>For a comprehensive description of ISO 8601 based date-time cycling,
see <a class="reference internal" href="suite-config.html#advancedcycling"><span class="std std-ref">Advanced Examples</span></a></li>
<li>For more on runahead limiting in cycling suites,
see <a class="reference internal" href="running-suites.html#runaheadlimit"><span class="std std-ref">Runahead Limiting</span></a>.</li>
</ul>
</div>
<div class="section" id="inter-cycle-triggers">
<span id="tutintercyclepointtriggers"></span><h3>7.25.2. Inter-Cycle Triggers<a class="headerlink" href="#inter-cycle-triggers" title="Permalink to this headline">¶</a></h3>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/cycling/two</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">tut/cycling/two</span></code> suite adds inter-cycle dependence
to the previous example:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="c1"># Repeat with cycle points of 00 and 12 hours every day:</span>
        <span class="nt">[[[T00,T12]]]</span>
            <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">foo</span>[<span class="nb">-PT12H</span>] <span class="o">=&gt;</span> <span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">bar</span><span class="c">&quot;</span>
</pre></div>
</div>
<p>For any given cycle point in the sequence defined by the
cycling graph section heading, <code class="docutils literal notranslate"><span class="pre">bar</span></code> triggers off
<code class="docutils literal notranslate"><span class="pre">foo</span></code> as before, but now <code class="docutils literal notranslate"><span class="pre">foo</span></code> triggers off its own
previous instance <code class="docutils literal notranslate"><span class="pre">foo[-PT12H]</span></code>. Date-time offsets in
inter-cycle triggers are expressed as ISO 8601 intervals (12 hours
in this case). <a class="reference internal" href="#fig-tut-two"><span class="std std-numref">Fig. 18</span></a> shows how this connects the
cycling graph sections together.</p>
<div class="figure align-center" id="id7">
<span id="fig-tut-two"></span><img alt="_images/tut-two.png" src="_images/tut-two.png" />
<p class="caption"><span class="caption-number">Fig. 18 </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">tut/cycling/two</span></code> suite</span></p>
</div>
<p>Experiment with this suite to see how inter-cycle triggers work.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The first instance of <code class="docutils literal notranslate"><span class="pre">foo</span></code>, at suite start-up, will
trigger immediately in spite of its inter-cycle trigger, because cylc
ignores dependence on points earlier than the initial cycle point.
However, the presence of an inter-cycle trigger usually implies something
special has to happen at start-up. If a model depends on its own previous
instance for restart files, for example, then some special process has to
generate the initial set of restart files when there is no previous cycle
point to do it. The following section shows one way to handle this
in cylc suites.</p>
</div>
</div>
<div class="section" id="initial-non-repeating-r1-tasks">
<span id="id3"></span><h3>7.25.3. Initial Non-Repeating (R1) Tasks<a class="headerlink" href="#initial-non-repeating-r1-tasks" title="Permalink to this headline">¶</a></h3>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/cycling/three</span></code></p>
<p>Sometimes we want to be able to run a task at the initial cycle point, but
refrain from running it in subsequent cycles. We can do this by writing an
extra set of dependencies that are only valid at a single date-time cycle
point. If we choose this to be the initial cycle point, these will only apply
at the very start of the suite.</p>
<p>The cylc syntax for writing this single date-time cycle point occurrence is
<code class="docutils literal notranslate"><span class="pre">R1</span></code>, which stands for <code class="docutils literal notranslate"><span class="pre">R1/no-specified-date-time/no-specified-period</span></code>.
This is an adaptation of part of the ISO 8601 date-time standard’s recurrence
syntax (<code class="docutils literal notranslate"><span class="pre">Rn/date-time/period</span></code>) with some special context information
supplied by cylc for the <code class="docutils literal notranslate"><span class="pre">no-specified-*</span></code> data.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">1</span></code> in the <code class="docutils literal notranslate"><span class="pre">R1</span></code> means run once. As we’ve specified
no date-time, Cylc will use the initial cycle point date-time by default,
which is what we want. We’ve also missed out specifying the period - this is
set by cylc to a zero amount of time in this case (as it never
repeats, this is not significant).</p>
<p>For example, in <code class="docutils literal notranslate"><span class="pre">tut/cycling/three</span></code>:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[cylc]</span>
    <span class="nv">cycle point time zone </span><span class="o">=</span><span class="s"> +13</span>
<span class="nt">[scheduling]</span>
    <span class="nv">initial cycle point </span><span class="o">=</span><span class="s"> 20130808T00</span>
    <span class="nv">final cycle point </span><span class="o">=</span><span class="s"> 20130812T00</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nt">[[[R1]]]</span>
            <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">prep</span> <span class="o">=&gt;</span> <span class="kd">foo</span><span class="c">&quot;</span>
        <span class="nt">[[[T00,T12]]]</span>
            <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">foo</span>[<span class="nb">-PT12H</span>] <span class="o">=&gt;</span> <span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">bar</span><span class="c">&quot;</span>
</pre></div>
</div>
<p>This is shown in <a class="reference internal" href="#fig-tut-three"><span class="std std-numref">Fig. 19</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The time zone has been set to <code class="docutils literal notranslate"><span class="pre">+1300</span></code> in this case,
instead of UTC (<code class="docutils literal notranslate"><span class="pre">Z</span></code>) as before. If no time zone or UTC mode was set,
the local time zone of your machine will be used in the cycle points.</p>
</div>
<p>At the initial cycle point, <code class="docutils literal notranslate"><span class="pre">foo</span></code> will depend on <code class="docutils literal notranslate"><span class="pre">foo[-PT12H]</span></code> and also
on <code class="docutils literal notranslate"><span class="pre">prep</span></code>:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nv">prep.20130808T0000+13 &amp; foo.20130807T1200+13 </span><span class="o">=</span><span class="s">&gt; foo.20130808T0000+13</span>
</pre></div>
</div>
<p>Thereafter, it will just look like e.g.:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nv">foo.20130808T0000+13 </span><span class="o">=</span><span class="s">&gt; foo.20130808T1200+13</span>
</pre></div>
</div>
<p>However, in our initial cycle point example, the dependence on
<code class="docutils literal notranslate"><span class="pre">foo.20130807T1200+13</span></code> will be ignored, because that task’s cycle
point is earlier than the suite’s initial cycle point and so it cannot run.
This means that the initial cycle point dependencies for <code class="docutils literal notranslate"><span class="pre">foo</span></code>
actually look like:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nv">prep.20130808T0000+13 </span><span class="o">=</span><span class="s">&gt; foo.20130808T0000+13</span>
</pre></div>
</div>
<div class="figure align-center" id="id8">
<span id="fig-tut-three"></span><img alt="_images/tut-three.png" src="_images/tut-three.png" />
<p class="caption"><span class="caption-number">Fig. 19 </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">tut/cycling/three</span></code> suite</span></p>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">R1</span></code> tasks can also be used to make something special
happen at suite shutdown, or at any single cycle point throughout the
suite run. For a full primer on cycling syntax, see <a class="reference internal" href="suite-config.html#advancedcycling"><span class="std std-ref">Advanced Examples</span></a>.</li>
</ul>
</div>
<div class="section" id="integer-cycling">
<span id="tutinteger"></span><h3>7.25.4. Integer Cycling<a class="headerlink" href="#integer-cycling" title="Permalink to this headline">¶</a></h3>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/cycling/integer</span></code></p>
<p>Cylc can do also do integer cycling for repeating workflows that are not
date-time based.</p>
<p>Open the <code class="docutils literal notranslate"><span class="pre">tut/cycling/integer</span></code> suite, which is plotted in
<a class="reference internal" href="#fig-tut-int"><span class="std std-numref">Fig. 20</span></a>.</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
    <span class="nv">cycling mode </span><span class="o">=</span><span class="s"> integer</span>
    <span class="nv">initial cycle point </span><span class="o">=</span><span class="s"> 1</span>
    <span class="nv">final cycle point </span><span class="o">=</span><span class="s"> 3</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nt">[[[R1]]]</span> <span class="c1"># = R1/1/?</span>
            <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="kd">start</span> <span class="o">=&gt;</span> <span class="kd">foo</span>
        <span class="nt">[[[P1]]]</span> <span class="c1"># = R/1/P1</span>
            <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="kd">foo</span>[<span class="nb">-P1</span>] <span class="o">=&gt;</span> <span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">bar</span>
        <span class="nt">[[[R2/P1]]]</span> <span class="c1"># = R2/P1/3</span>
            <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="kd">bar</span> <span class="o">=&gt;</span> <span class="kd">stop</span>

<span class="nt">[visualization]</span>
    <span class="nt">[[node attributes]]</span>
        <span class="nv">start </span><span class="o">=</span><span class="s"> &quot;style=filled&quot;, &quot;fillcolor=skyblue&quot;</span>
        <span class="nv">foo </span><span class="o">=</span><span class="s"> &quot;style=filled&quot;, &quot;fillcolor=slategray&quot;</span>
        <span class="nv">bar </span><span class="o">=</span><span class="s"> &quot;style=filled&quot;, &quot;fillcolor=seagreen3&quot;</span>
        <span class="nv">stop </span><span class="o">=</span><span class="s"> &quot;style=filled&quot;, &quot;fillcolor=orangered&quot;</span>
</pre></div>
</div>
<div class="figure align-center" id="id9">
<span id="fig-tut-int"></span><img alt="_images/tut-cyc-int.png" src="_images/tut-cyc-int.png" />
<p class="caption"><span class="caption-number">Fig. 20 </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">tut/cycling/integer</span></code> suite</span></p>
</div>
<p>The integer cycling notation is intended to look similar to the ISO 8601
date-time notation, but it is simpler for obvious reasons. The example suite
illustrates two recurrence forms,
<code class="docutils literal notranslate"><span class="pre">Rn/start-point/period</span></code> and
<code class="docutils literal notranslate"><span class="pre">Rn/period/stop-point</span></code>, simplified somewhat using suite context
information (namely the initial and final cycle points). The first form is
used to run one special task called <code class="docutils literal notranslate"><span class="pre">start</span></code> at start-up, and for the
main cycling body of the suite; and the second form to run another special task
called <code class="docutils literal notranslate"><span class="pre">stop</span></code> in the final two cycles. The <code class="docutils literal notranslate"><span class="pre">P</span></code> character
denotes period (interval) just like in the date-time notation.
<code class="docutils literal notranslate"><span class="pre">R/1/P2</span></code> would generate the sequence of points <code class="docutils literal notranslate"><span class="pre">1,3,5,...</span></code>.</p>
<ul class="simple">
<li>For more on integer cycling, including a more realistic usage example
see <a class="reference internal" href="suite-config.html#integercycling"><span class="std std-ref">Integer Cycling</span></a>.</li>
</ul>
</div>
</div>
<div class="section" id="jinja2">
<h2>7.26. Jinja2<a class="headerlink" href="#jinja2" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/jinja2</span></code></p>
<p>Cylc has built in support for the Jinja2 template processor, which
allows us to embed code in suite configurations to generate the
final result seen by cylc.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tut/oneoff/jinja2</span></code> suite illustrates two common
uses of Jinja2: changing suite content or structure based on the value
of a logical switch; and iteratively generating dependencies and runtime
configuration for groups of related tasks:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="ch">#!jinja2</span>

<span class="cp">{% set MULTI = True %}</span>
<span class="cp">{% set N_GOODBYES = 3 %}</span>

<span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;A Jinja2 Hello World! suite&quot;</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
<span class="cp">{% if MULTI %}</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span> <span class="o">=&gt;</span> <span class="kd">BYE</span><span class="c">&quot;</span>
<span class="cp">{% else %}</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span><span class="c">&quot;</span>
<span class="cp">{% endif %}</span>

<span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Hello World!&quot;</span>
<span class="cp">{% if MULTI %}</span>
    <span class="nt">[[BYE]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Goodbye World!&quot;</span>
    <span class="cp">{% for I in range(0,N_GOODBYES) %}</span>
    <span class="nt">[[ goodbye_</span><span class="cp">{{I}}</span><span class="nt"> ]]</span>
        <span class="nv">inherit </span><span class="o">=</span><span class="s"> BYE</span>
    <span class="cp">{% endfor %}</span>
<span class="cp">{% endif %}</span>
</pre></div>
</div>
<p>To view the result of Jinja2 processing with the Jinja2 flag
<code class="docutils literal notranslate"><span class="pre">MULTI</span></code> set to <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc view --jinja2 --stdout tut/oneoff/jinja2
</pre></div>
</div>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;A Jinja2 Hello World! suite&quot;</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span><span class="c">&quot;</span>
<span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Hello World!&quot;</span>
</pre></div>
</div>
<p>And with <code class="docutils literal notranslate"><span class="pre">MULTI</span></code> set to <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc view --jinja2 --stdout tut/oneoff/jinja2
</pre></div>
</div>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;A Jinja2 Hello World! suite&quot;</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span> <span class="o">=&gt;</span> <span class="kd">BYE</span><span class="c">&quot;</span>
<span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Hello World!&quot;</span>
    <span class="nt">[[BYE]]</span>
        <span class="nv">script </span><span class="o">=</span><span class="s"> &quot;sleep 10; echo Goodbye World!&quot;</span>
    <span class="nt">[[ goodbye_0 ]]</span>
        <span class="nv">inherit </span><span class="o">=</span><span class="s"> BYE</span>
    <span class="nt">[[ goodbye_1 ]]</span>
        <span class="nv">inherit </span><span class="o">=</span><span class="s"> BYE</span>
    <span class="nt">[[ goodbye_2 ]]</span>
        <span class="nv">inherit </span><span class="o">=</span><span class="s"> BYE</span>
</pre></div>
</div>
</div>
<div class="section" id="task-retry-on-failure">
<h2>7.27. Task Retry On Failure<a class="headerlink" href="#task-retry-on-failure" title="Permalink to this headline">¶</a></h2>
<p><strong>suite</strong>: <code class="docutils literal notranslate"><span class="pre">tut/oneoff/retry</span></code></p>
<p>Tasks can be configured to retry a number of times if they fail.
An environment variable <code class="docutils literal notranslate"><span class="pre">$CYLC_TASK_TRY_NUMBER</span></code> increments
from <code class="docutils literal notranslate"><span class="pre">1</span></code> on each successive try, and is passed to the task to allow
different behaviour on the retry:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[meta]</span>
    <span class="nv">title </span><span class="o">=</span><span class="s"> &quot;A task with automatic retry on failure&quot;</span>
<span class="nt">[scheduling]</span>
    <span class="nt">[[dependencies]]</span>
        <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">hello</span><span class="c">&quot;</span>
<span class="nt">[runtime]</span>
    <span class="nt">[[hello]]</span>
        <span class="nv">script </span><span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">sleep 10</span>
<span class="s2">if [[ $CYLC_TASK_TRY_NUMBER &lt; 3 ]]; then</span>
<span class="s2">    echo &quot;Hello ... aborting!&quot;</span>
<span class="s2">    exit 1</span>
<span class="s2">else</span>
<span class="s2">    echo &quot;Hello World!&quot;</span>
<span class="s2">fi&quot;&quot;&quot;</span>
        <span class="nt">[[[job]]]</span>
            <span class="nv">execution retry delays </span><span class="o">=</span><span class="s"> 2*PT6S</span> <span class="c1"># retry twice after 6-second delays</span>
</pre></div>
</div>
<p>If a task with configured retries fails, it goes into the <em>retrying</em> state
until the next retry delay is up, then it resubmits. It only enters the
<em>failed</em> state on a final definitive failure.</p>
<p>If a task with configured retries is <em>killed</em> (by <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">kill</span></code> or
via the GUI) it goes to the <em>held</em> state so that the operator can decide
whether to release it and continue the retry sequence or to abort the retry
sequence by manually resetting it to the <em>failed</em> state.</p>
<p>Experiment with <code class="docutils literal notranslate"><span class="pre">tut/oneoff/retry</span></code> to see how this works.</p>
</div>
<div class="section" id="other-users-suites">
<h2>7.28. Other Users’ Suites<a class="headerlink" href="#other-users-suites" title="Permalink to this headline">¶</a></h2>
<p>If you have read access to another user’s account (even on another host)
it is possible to use <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">monitor</span></code> to look at their suite’s
progress without full shell access to their account. To do this, you
will need to copy their suite passphrase to</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$HOME</span>/.cylc/SUITE_OWNER@SUITE_HOST/SUITE_NAME/passphrase
</pre></div>
</div>
<p>(use of the host and owner names is optional here - see <a class="reference internal" href="running-suites.html#passphrases"><span class="std std-ref">Full Control - With Auth Files</span></a>)
<em>and</em> also retrieve the port number of the running suite from:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~SUITE_OWNER/cylc-run/SUITE_NAME/.service/contact
</pre></div>
</div>
<p>Once you have this information, you can run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cylc monitor --user<span class="o">=</span>SUITE_OWNER --port<span class="o">=</span>SUITE_PORT SUITE_NAME
</pre></div>
</div>
<p>to view the progress of their suite.</p>
<p>Other suite-connecting commands work in the same way; see
<a class="reference internal" href="running-suites.html#remotecontrol"><span class="std std-ref">Remote Control</span></a>.</p>
</div>
<div class="section" id="other-things-to-try">
<h2>7.29. Other Things To Try<a class="headerlink" href="#other-things-to-try" title="Permalink to this headline">¶</a></h2>
<p>Almost every feature of cylc can be tested quickly and easily with a
simple dummy suite. You can write your own, or start from one of the
example suites in <code class="docutils literal notranslate"><span class="pre">/path/to/cylc/examples</span></code> (see use of
<code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">import-examples</span></code> above) - they all run “out the box”
and can be copied and modified at will.</p>
<ul class="simple">
<li>Change the suite runahead limit in a cycling suite.</li>
<li>Stop a suite mid-run with <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">stop</span></code>, and restart
it again with <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">restart</span></code>.</li>
<li>Hold (pause) a suite mid-run with <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">hold</span></code>,
then modify the suite configuration and <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">reload</span></code> it
before using <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">release</span></code> to continue (you can also
reload without holding).</li>
<li>Use the gcylc View menu to show the task state color key and
watch tasks in the <code class="docutils literal notranslate"><span class="pre">task-states</span></code> example evolve
as the suite runs.</li>
<li>Manually re-run a task that has already completed or failed,
with <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">trigger</span></code>.</li>
<li>Use an <em>internal queue</em> to prevent more than an alotted number
of tasks from running at once even though they are ready -
see <a class="reference internal" href="running-suites.html#internalqueues"><span class="std std-ref">Limiting Activity With Internal Queues</span></a>.</li>
<li>Configure task event hooks to send an email, or shut the suite down,
on task failure.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/cylc-logo.png" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction: How Cylc Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="screenshots.html">2. Cylc Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">3. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">4. Cylc Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">5. Workflows For Cycling Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="global-site-user-conf.html">6. Global (Site, User) Configuration Files</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#user-config-file">7.1. User Config File</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configure-environment-on-job-hosts">7.1.1. Configure Environment on Job Hosts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#user-interfaces">7.2. User Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#command-line-interface-cli">7.2.1. Command Line Interface (CLI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#graphical-user-interface-gui">7.2.2. Graphical User Interface (GUI)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#suite-configuration">7.3. Suite Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#suite-registration">7.4. Suite Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#suite-passphrases">7.5. Suite Passphrases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#import-the-example-suites">7.6. Import The Example Suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rename-the-imported-tutorial-suites">7.7. Rename The Imported Tutorial Suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#suite-validation">7.8. Suite Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hello-world-in-cylc">7.9. Hello World in Cylc</a></li>
<li class="toctree-l2"><a class="reference internal" href="#editing-suites">7.10. Editing Suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-suites">7.11. Running Suites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cli">7.11.1. CLI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gui">7.11.2. GUI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#remote-suites">7.12. Remote Suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#discovering-running-suites">7.13. Discovering Running Suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#task-identifiers">7.14. Task Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#job-submission-how-tasks-are-executed">7.15. Job Submission: How Tasks Are Executed</a></li>
<li class="toctree-l2"><a class="reference internal" href="#locating-suite-and-task-output">7.16. Locating Suite And Task Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="#viewing-suite-logs-in-a-web-browser-cylc-review">7.17. Viewing Suite Logs in a Web Browser: Cylc Review</a></li>
<li class="toctree-l2"><a class="reference internal" href="#remote-tasks">7.18. Remote Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#task-triggering">7.19. Task Triggering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#task-failure-and-suicide-triggering">7.19.1. Task Failure And Suicide Triggering</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#runtime-inheritance">7.20. Runtime Inheritance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#triggering-families">7.21. Triggering Families</a></li>
<li class="toctree-l2"><a class="reference internal" href="#triggering-off-of-families">7.22. Triggering Off Of Families</a></li>
<li class="toctree-l2"><a class="reference internal" href="#suite-visualization">7.23. Suite Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#external-task-scripts">7.24. External Task Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cycling-tasks">7.25. Cycling Tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#iso-8601-date-time-syntax">7.25.1. ISO 8601 Date-Time Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inter-cycle-triggers">7.25.2. Inter-Cycle Triggers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initial-non-repeating-r1-tasks">7.25.3. Initial Non-Repeating (R1) Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#integer-cycling">7.25.4. Integer Cycling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#jinja2">7.26. Jinja2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#task-retry-on-failure">7.27. Task Retry On Failure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-users-suites">7.28. Other Users’ Suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-things-to-try">7.29. Other Things To Try</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="suite-name-reg.html">8. Suite Name Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="suite-config.html">9. Suite Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="task-implementation.html">10. Task Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="task-job-submission.html">11. Task Job Submission and Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="external-triggers.html">12. External Triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="running-suites.html">13. Running Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="suite-storage-etc.html">14. Suite Storage, Discovery, Revision Control, and Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices/appendices-master.html">15. Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="suite-design-guide/suite-design-guide-master.html">16. Suite Design Guide</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tutorial.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div><!--
  element which gets populated with the list of available versions and
  formats for the documentation by versions.js
-->
<div
  class="rst-versions"
  data-toggle="rst-versions"
  id='versions-and-formats'
></div>



<script type="text/javascript">
    const CUR_FORMAT = "html";
    const CUR_VERSION = "7.8.8";
    // name of page (in URL), for singlepage builds this will be `index`
    const PAGE_NAME = "tutorial";
    // URL path to the base docs dir i.e. ROOT_DIR/version/format
    const ROOT_DIR = "../..";
</script>

<script
  type="text/javascript"
  src="../../versions.js"
></script>

<!-- Hide the current version (doesn't fit well in this theme) -->
<style
  type="text/css"
>
  #versions-and-formats .rst-current-version {
    display: none;
  }
</style>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="suite-name-reg.html" title="8. Suite Name Registration"
             >next</a> |</li>
        <li class="right" >
          <a href="global-site-user-conf.html" title="6. Global (Site, User) Configuration Files"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">The Cylc Suite Engine 7.8.8 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2019 NIWA &amp; British Crown (Met Office) &amp; Contributors.
      Last updated on Mar 26, 2021.
    </div>
  </body>
</html>
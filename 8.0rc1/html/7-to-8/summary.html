<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick Summary Of Changes &mdash; Cylc 8.0rc1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/diff_selector.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/grid_table.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/hieroglyph_theme_addons.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/tutorial.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/addons.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/cylc-favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/diff_selector.js"></script>
        <script src="../_static/js/minicylc.js"></script>
        <script src="../_static/js/spoiler.js"></script>
        <script src="../_static/js/addons.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cheat Sheet" href="cheat-sheet.html" />
    <link rel="prev" title="Cylc 8 Migration Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/cylc-logo-white.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                8.0rc1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Cylc 8 Migration Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Quick Summary Of Changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#terminology">Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cylc-7-compatibility-mode">Cylc 7 Compatibility Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-to-cylc-8">Upgrading To Cylc 8</a></li>
<li class="toctree-l3"><a class="reference internal" href="#architecture">Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-web-and-terminal-uis">New Web and Terminal UIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scheduling-algorithm">Scheduling Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="#task-job-states">Task/Job States</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-and-expected-task-outputs">Optional and Expected Task Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#window-on-the-workflow">Window on the Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#platform-awareness">Platform Awareness</a></li>
<li class="toctree-l3"><a class="reference internal" href="#graph-syntax">Graph Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-installation">Workflow Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cylc-install">Cylc Install</a></li>
<li class="toctree-l4"><a class="reference internal" href="#file-installation">File Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#symlink-dirs">Symlink Dirs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#safe-run-semantics">Safe Run Semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packaging">Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#task-job-scripts">Task Job Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-zones">Time Zones</a></li>
<li class="toctree-l3"><a class="reference internal" href="#runahead-limit-queues">Runahead Limit &amp; Queues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cheat-sheet.html">Cheat Sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="major-changes/index.html">Major Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="caveats.html">Cylc 8.0rc1 Caveats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow-design-guide/index.html">Workflow Design Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cylc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Cylc 8 Migration Guide</a> &raquo;</li>
      <li>Quick Summary Of Changes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/7-to-8/summary.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-summary-of-changes">
<span id="overview"></span><h1>Quick Summary Of Changes<a class="headerlink" href="#quick-summary-of-changes" title="Permalink to this headline"></a></h1>
<section id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline"></a></h2>
<p>Cylc now uses simpler more widely understood terms for several core concepts.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 48%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Cylc 7 Term</p></th>
<th class="head"><p>Cylc 8 Term</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>suite</p></td>
<td><p><strong>workflow</strong></p></td>
</tr>
<tr class="row-odd"><td><p>batch system</p></td>
<td><p><strong>job runner</strong></p></td>
</tr>
<tr class="row-even"><td><p>suite daemon</p></td>
<td><p><strong>scheduler</strong></p></td>
</tr>
</tbody>
</table>
<p>The workflow configuration file has changed from <code class="docutils literal notranslate"><span class="pre">suite.rc</span></code> to <code class="docutils literal notranslate"><span class="pre">flow.cylc</span></code>.</p>
</section>
<section id="cylc-7-compatibility-mode">
<h2>Cylc 7 Compatibility Mode<a class="headerlink" href="#cylc-7-compatibility-mode" title="Permalink to this headline"></a></h2>
<p>The old <code class="docutils literal notranslate"><span class="pre">suite.rc</span></code> filename triggers a <a class="reference internal" href="major-changes/compatibility-mode.html#cylc-7-compat-mode"><span class="std std-ref">backward
compatibility mode</span></a> in Cylc 8 which supports Cylc 7
workflow configruations out of the box, with the following caveats:</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Cylc 6 syntax deprecated by Cylc 7 is now obsolete. Run <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">validate</span></code>
<em>with Cylc 7</em> on your <code class="docutils literal notranslate"><span class="pre">suite.rc</span></code> to check for deprecation warnings and fix
those before validating with Cylc 8.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Check for any use of Cylc commands in task scripting. Some Cylc 7 commands
have been removed and some others now behave differently.
See <a class="reference internal" href="major-changes/cli.html#majorchangescli"><span class="std std-ref">command line interface changes</span></a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Cylc 8 does not support
<a class="reference internal" href="major-changes/excluding-tasks.html#majorchangesexcludingtasksatstartup"><span class="std std-ref">excluding tasks at start-up</span></a>.
If your workflow used this old functionality, it may have been used in
combination with the <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">insert</span></code> command (which has been removed from
Cylc 8) and <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">remove</span></code> (which still exists but is much less needed).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Cylc 8 cannot <em>restart</em> a Cylc 7 workflow mid-run. Instead, <a class="reference internal" href="#workflow-installation"><span class="std std-ref">install</span></a> the workflow to a new run directory and start it
from scratch at the right cycle point or task(s):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">play</span> <span class="pre">--start-cycle-point=&lt;cycle&gt;</span></code> (c.f. Cylc 7 <em>warm start</em>), or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">play</span> <span class="pre">--start-task=&lt;cycle/task&gt;</span></code>   (Cylc 8 can start anywhere in the graph)</p></li>
</ul>
<p>Any previous-cycle workflow data needed by the new run will need to be
manually copied over from the original run directory.</p>
</div>
</section>
<section id="upgrading-to-cylc-8">
<h2>Upgrading To Cylc 8<a class="headerlink" href="#upgrading-to-cylc-8" title="Permalink to this headline"></a></h2>
<p>To take advantage of new Cylc 8 features run <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">validate</span></code> (with Cylc 8)
on your workflow and take action on any warnings then rename the workflow
configuration file from <code class="docutils literal notranslate"><span class="pre">suite.rc</span></code> to <code class="docutils literal notranslate"><span class="pre">flow.cylc</span></code>.</p>
<p>If your workflow features <a class="reference internal" href="../glossary.html#term-graph-branching"><span class="xref std std-term">graph branching</span></a> you may need to upgrade it
to use <a class="reference internal" href="../glossary.html#term-optional-output"><span class="xref std std-term">optional outputs</span></a>.</p>
</section>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>Technical Reference: <a class="reference internal" href="../reference/architecture/index.html#architecture-reference"><span class="std std-ref">Architecture</span></a></p></li>
</ul>
</div>
<p>The main Cylc 8 system components are:</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Cylc Scheduler</strong></dt><dd><ul>
<li><p>The workflow engine core, Python 3 based</p></li>
<li><p>Includes the <strong>CLI</strong> (Command Line Interface)</p></li>
<li><p>And <strong>TUI</strong>, a new Terminal UI application</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Cylc Hub</strong></dt><dd><ul>
<li><p>Authenticates users, spawns and proxies Cylc UI Servers</p></li>
<li><p>Can run as a regular or privileged user</p></li>
<li><p>(The Hub is a <a class="reference external" href="https://jupyter.org/hub">Jupyterhub</a> instance)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Cylc UI Server</strong></dt><dd><ul>
<li><p>Interacts with Schedulers and the filesystem</p></li>
<li><p>Serves the UI to users</p></li>
<li><p>Can be launched by the privileged Hub, for multi-user installations</p></li>
<li><p>Or run standalone for use by a single user</p></li>
<li><p>(The UI Server is a <a class="reference external" href="https://jupyter-server.readthedocs.io">Jupyter Server</a> extension)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Cylc UI</strong></dt><dd><ul>
<li><p>In-browser web UI, includes:</p></li>
<li><p>A dashboard with summary information and documentation links</p></li>
<li><p>Integrated gscan (multi-workflow) side-panel</p></li>
<li><p>Responsive web design (from desktop to table to mobile)</p></li>
<li><p>Tabbed interface to display multiple workflow views</p></li>
<li><p>Command integration for interacting with task, jobs, and schedulers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Network layers</strong></dt><dd><ul>
<li><p>Incremental push updates (c.f. polled full-state updates in Cylc 7)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="new-web-and-terminal-uis">
<h2>New Web and Terminal UIs<a class="headerlink" href="#new-web-and-terminal-uis" title="Permalink to this headline"></a></h2>
<figure class="align-center" id="id3" style="width: 80%">
<img alt="../_images/hub.png" src="../_images/hub.png" />
<figcaption>
<p><span class="caption-text">Cylc 8 Hub authentication page</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id4" style="width: 80%">
<img alt="../_images/cylc-ui-dash.png" src="../_images/cylc-ui-dash.png" />
<figcaption>
<p><span class="caption-text">Cylc 8 UI dashboard</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id5" style="width: 80%">
<img alt="../_images/cylc-ui-tree.png" src="../_images/cylc-ui-tree.png" />
<figcaption>
<p><span class="caption-text">Cylc 8 UI workflow tree view</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id6" style="width: 80%">
<img alt="../_images/cylc-tui.png" src="../_images/cylc-tui.png" />
<figcaption>
<p><span class="caption-text">Cylc 8 TUI application</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="scheduling-algorithm">
<h2>Scheduling Algorithm<a class="headerlink" href="#scheduling-algorithm" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>User Guide:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../user-guide/writing-workflows/scheduling.html#user-guide-expected-outputs"><span class="std std-ref">Expected Outputs</span></a></p></li>
<li><p><a class="reference internal" href="../user-guide/writing-workflows/scheduling.html#user-guide-optional-outputs"><span class="std std-ref">Optional Outputs</span></a></p></li>
<li><p><a class="reference internal" href="../user-guide/running-workflows/reflow.html#user-guide-reflow"><span class="std std-ref">Flows &amp; Reflow</span></a></p></li>
<li><p><a class="reference internal" href="../user-guide/running-workflows/tasks-jobs-ui.html#n-window"><span class="std std-ref">Tasks in the UI</span></a></p></li>
</ul>
</div>
<p>Cylc can manage infinite workflows of repeating tasks:</p>
<img alt="../_images/cycling.png" class="align-center" src="../_images/cycling.png" />
<dl class="simple">
<dt>Cylc 8 has a new scheduling algorithm that:</dt><dd><ul class="simple">
<li><p>Is much more efficient because it only has to manage active tasks</p>
<ul>
<li><p>waiting tasks are not pre-spawned before they are needed</p></li>
<li><p>succeeded tasks are not kept across the active task window</p></li>
<li><p>no costly indiscriminate dependency matching is done</p></li>
</ul>
</li>
<li><p>Distinguishes between <a class="reference internal" href="../glossary.html#term-optional-output"><span class="xref std std-term">optional</span></a> and
<a class="reference internal" href="../glossary.html#term-expected-output"><span class="xref std std-term">expected</span></a> task outputs, to support:</p>
<ul>
<li><p><a class="reference internal" href="../glossary.html#term-graph-branching"><span class="xref std std-term">graph branching</span></a> without <a class="reference internal" href="../glossary.html#term-suicide-trigger"><span class="xref std std-term">suicide triggers</span></a></p></li>
<li><p>correct diagnosis of <a class="reference internal" href="../glossary.html#term-workflow-completion"><span class="xref std std-term">workflow completion</span></a></p></li>
</ul>
</li>
<li><p>Causes no implicit dependence on previous-instance job submit</p>
<ul>
<li><p>instances of same task can run out of cycle point order</p></li>
<li><p>the workflow will not unnecessarily stall downstream of failed tasks</p></li>
</ul>
</li>
<li><p>Provides a sensible active-task based window on the evolving workflow</p>
<ul>
<li><p>(to fully understand which tasks appeared in the Cylc 7 GUI you had to
understand the scheduling algorithm)</p></li>
</ul>
</li>
<li><p>Supports a powerful new capability called <a class="reference internal" href="../glossary.html#term-reflow"><span class="xref std std-term">reflow</span></a>: you can trigger
multiple concurrent flows in the same graph at once, managed by the same
scheduler</p></li>
<li><p>Can start a workflow from any task or tasks in the graph (no need for
checkpoint restart)</p></li>
<li><p>Can limit activity within as well as across cycles, without risking a stall</p></li>
</ul>
</dd>
</dl>
</section>
<section id="task-job-states">
<h2>Task/Job States<a class="headerlink" href="#task-job-states" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>User Guide <a class="reference internal" href="../user-guide/running-workflows/task-job-states.html#task-job-states"><span class="std std-ref">Task &amp; Job States</span></a></p></li>
</ul>
</div>
<p><a class="reference internal" href="../glossary.html#term-task"><span class="xref std std-term">Tasks</span></a> are nodes in the abstract workflow graph representing
processes that should run once their prerequisites are satisfied. <a class="reference internal" href="../glossary.html#term-job"><span class="xref std std-term">Jobs</span></a> are the real processes submitted to execute these tasks (or at least, at
the submission stage, real job scripts). A task can have multiple jobs, by
automatic retries and manual re-triggering.</p>
<p>Cylc 7 had 13 task/job states. The GUI only showed tasks, with job data
from the latest task job.</p>
<p>Cylc 8 has only 8 task/job states. The Cylc 8 UI shows both task and jobs.
Task icons are monochrome circles; job icons are coloured squares. The running
task icon incorporates a radial progress indicator.</p>
<img alt="../_images/task-job.png" class="align-center" src="../_images/task-job.png" />
<p>The task states removed since Cylc 7 have been absorbed into <em>waiting</em>, but
you can see or infer what is being waited on: e.g. a queue, xtrigger, or retry
timer. For instance, a waiting task that already has associated jobs is going
to retry.</p>
</section>
<section id="optional-and-expected-task-outputs">
<h2>Optional and Expected Task Outputs<a class="headerlink" href="#optional-and-expected-task-outputs" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>User Guide:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../user-guide/writing-workflows/scheduling.html#user-guide-expected-outputs"><span class="std std-ref">Expected Outputs</span></a></p></li>
<li><p><a class="reference internal" href="../user-guide/writing-workflows/scheduling.html#user-guide-optional-outputs"><span class="std std-ref">Optional Outputs</span></a></p></li>
</ul>
<p>Major Changes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="major-changes/suicide-triggers.html#suicide-triggers"><span class="std std-ref">Suicide Triggers</span></a></p></li>
</ul>
</div>
<p>Cylc 8 distinguishes between <a class="reference internal" href="../glossary.html#term-expected-output"><span class="xref std std-term">expected</span></a> and
<a class="reference internal" href="../glossary.html#term-optional-output"><span class="xref std std-term">optional</span></a> task outputs. This supports optional
<a class="reference internal" href="../glossary.html#term-graph-branching"><span class="xref std std-term">graph branching</span></a> and it allows the scheduler to correctly diagnose
<a class="reference internal" href="../glossary.html#term-workflow-completion"><span class="xref std std-term">workflow completion</span></a>.</p>
<p>If a task <a class="reference internal" href="../glossary.html#term-job"><span class="xref std std-term">job</span></a> finishes without completing an expected output the
scheduler will retain it, pending user intervention, as an <a class="reference internal" href="../glossary.html#term-incomplete-task"><span class="xref std std-term">incomplete
task</span></a>.</p>
<p>A task can finish with or without completing optional outputs, on the other
hand. The primary use for optional outputs is alternate path branching in the
graph.</p>
<p>If there is nothing left to do, but incomplete tasks are present, the scheduler
will conclude that the workflow did not run to completion as expected and will
<a class="reference internal" href="../glossary.html#term-stall"><span class="xref std std-term">stall</span></a> rather than shut down.</p>
</section>
<section id="window-on-the-workflow">
<h2>Window on the Workflow<a class="headerlink" href="#window-on-the-workflow" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>User Guide <a class="reference internal" href="../user-guide/running-workflows/tasks-jobs-ui.html#n-window"><span class="std std-ref">Tasks in the UI</span></a></p></li>
</ul>
</div>
<img alt="../_images/n-window.png" class="align-center" src="../_images/n-window.png" />
<p>The Cylc UI can’t show “all the tasks” at once because the graph may be huge,
or even infinite in extent in cycling systems. The Cylc 8 UI shows:</p>
<ul class="simple">
<li><p>Current <strong>active tasks</strong> (submitted, running) plus tasks waiting on scheduler
constraints (queues, runahead limit, clock triggers) and external triggers</p></li>
<li><p>Tasks up to <code class="docutils literal notranslate"><span class="pre">n</span></code> graph edges away from active tasks (default <code class="docutils literal notranslate"><span class="pre">1</span></code> edge)</p></li>
</ul>
</section>
<section id="platform-awareness">
<h2>Platform Awareness<a class="headerlink" href="#platform-awareness" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="major-changes/platforms.html#majorchangesplatforms"><span class="std std-ref">Platforms at Cylc 8.</span></a></p></li>
<li><p><a class="reference internal" href="../reference/config/writing-platform-configs.html#adminguide-platformconfigs"><span class="std std-ref">System admin’s guide to writing platforms.</span></a></p></li>
</ul>
</div>
<p>Cylc 7 was aware of individual job hosts.</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[runtime]</span>
   <span class="nt">[[model]]</span>
       <span class="nt">[[[remote]]]</span>
           <span class="nv">host </span><span class="o">=</span><span class="s"> hpc1.login.1</span>  <span class="c1"># Deprecated Cylc 8</span>
</pre></div>
</div>
<p>Cylc 8 is aware of host groups specified as <a class="reference internal" href="../glossary.html#term-platform"><span class="xref std std-term">[job] platforms</span></a>
in the global configuration. Platform hosts share a file system and <a class="reference internal" href="../glossary.html#term-job-runner"><span class="xref std std-term">job
runner</span></a>. If a host becomes unavailable Cylc 8 can use other hosts on the same
platform to interact with task jobs.</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[runtime]</span>
   <span class="nt">[[model]]</span>
       <span class="nv">platform </span><span class="o">=</span><span class="s"> hpc1</span>  <span class="c1"># Cylc 8</span>
       <span class="c1"># (Platform hosts and job runner defined in global config).</span>
   <span class="nt">[[model_cleanup]]</span>
       <span class="c1"># Platforms can have the same hosts with different job runners.</span>
       <span class="nv">platform </span><span class="o">=</span><span class="s"> hpc1_background</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Cylc 8 will pick a sensible platform for your Cylc 7 settings,
These deprecated settings will be removed at Cylc 9.</p>
</div>
</section>
<section id="graph-syntax">
<span id="to-8-summary-graph-syntax"></span><h2>Graph Syntax<a class="headerlink" href="#graph-syntax" title="Permalink to this headline"></a></h2>
<p>Cylc 7 had unnecessarily deep nesting of graph config sections:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
   <span class="nv">initial cycle point </span><span class="o">=</span><span class="s"> now</span>
   <span class="nt">[[dependencies]]</span>  <span class="c1"># Deprecated Cylc 7</span>
       <span class="nt">[[[R1]]]</span>
           <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">prep</span> <span class="o">=&gt;</span> <span class="kd">foo</span><span class="c">&quot;</span>
       <span class="nt">[[[R/^/P1D]]]</span>
           <span class="nv">graph</span><span class="s"> </span><span class="o">=</span> <span class="c">&quot;</span><span class="kd">foo</span> <span class="o">=&gt;</span> <span class="kd">bar</span> <span class="o">=&gt;</span> <span class="kd">baz</span><span class="c">&quot;</span>
</pre></div>
</div>
<p>Cylc 8 cleans this up:</p>
<div class="highlight-cylc notranslate"><div class="highlight"><pre><span></span><span class="nt">[scheduling]</span>
   <span class="nv">initial cycle point </span><span class="o">=</span><span class="s"> now</span>
   <span class="nt">[[graph]]</span>  <span class="c1"># Cylc 8</span>
       <span class="nv">R1 </span><span class="o">=</span><span class="s"> &quot;prep =&gt; foo&quot;</span>
       <span class="nv">R/^/P1D </span><span class="o">=</span><span class="s"> &quot;foo =&gt; bar =&gt; baz&quot;</span>
</pre></div>
</div>
</section>
<section id="workflow-installation">
<span id="id1"></span><h2>Workflow Installation<a class="headerlink" href="#workflow-installation" title="Permalink to this headline"></a></h2>
<p>The functionality of <code class="docutils literal notranslate"><span class="pre">rose</span> <span class="pre">suite-run</span></code> has been migrated into Cylc 8.</p>
<section id="cylc-install">
<h3>Cylc Install<a class="headerlink" href="#cylc-install" title="Permalink to this headline"></a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="major-changes/cylc-install.html#majorchangesinstall"><span class="std std-ref">Moving to Cylc Install</span></a>.</p></li>
</ul>
</div>
<p>Cylc install cleanly separates workflow source directory from run directory,
and installs workflow files into the run directory at start-up.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">install</span></code> copies workflow source files to a dedicated run-directory</p></li>
<li><p><a class="reference internal" href="../glossary.html#term-source-directory"><span class="xref std std-term">source directory</span></a> locations can be set in global config</p></li>
<li><p>each install creates a new numbered <a class="reference internal" href="../glossary.html#term-run-directory"><span class="xref std std-term">run directory</span></a> (by default)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">pwd</span>
<span class="go">~/cylc-src/demo</span>

<span class="gp">$ </span>ls
<span class="go">flow.cylc</span>

<span class="gp">$ </span>cylc install
<span class="go">INSTALLED demo/run1 from /home/oliverh/cylc-src/demo</span>

<span class="gp">$ </span>cylc play demo
<span class="go">...</span>
<span class="go">demo/run1: oliver.niwa.local PID=6702</span>

<span class="gp">$ </span>cylc install
<span class="go">INSTALLED demo/run2 from /home/oliverh/cylc-src/demo</span>

<span class="gp">$ </span>cylc play demo
<span class="go">...</span>
<span class="go">demo/run2: oliver.niwa.local PID=6962</span>
</pre></div>
</div>
<p>Workflows can be deleted with <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">clean</span></code> - see <a class="reference internal" href="../user-guide/removing-workflows.html#removing-workflows"><span class="std std-ref">Removing Workflows</span></a>. This
replaces the <code class="docutils literal notranslate"><span class="pre">rose</span> <span class="pre">suite-clean</span></code> functionality.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cylc 8 forbids having both <code class="docutils literal notranslate"><span class="pre">flow.cylc</span></code> and <code class="docutils literal notranslate"><span class="pre">suite.rc</span></code> files in the same
<a class="reference internal" href="../glossary.html#term-run-directory"><span class="xref std std-term">run directory</span></a> or <a class="reference internal" href="../glossary.html#term-source-directory"><span class="xref std std-term">source directory</span></a>.</p>
</div>
</section>
<section id="file-installation">
<h3>File Installation<a class="headerlink" href="#file-installation" title="Permalink to this headline"></a></h3>
<p>As part of the <code class="docutils literal notranslate"><span class="pre">rose</span> <span class="pre">suite-run</span></code> migration to Cylc, files are now installed onto
platforms. This is part of the remote initialization process which is triggered
when the first job runs on the platform.
The remote installation, as standard, includes the directories <code class="docutils literal notranslate"><span class="pre">app</span></code>, <code class="docutils literal notranslate"><span class="pre">bin</span></code>,
<code class="docutils literal notranslate"><span class="pre">etc</span></code> and <code class="docutils literal notranslate"><span class="pre">lib</span></code>. Extra files and directories can be included in this file
installation, under the <a class="reference internal" href="../reference/config/workflow.html#flow.cylc[scheduler]install" title="flow.cylc[scheduler]install"><code class="xref cylc cylc-conf docutils literal notranslate"><span class="pre">[scheduler]install</span></code></a> section of your
<code class="docutils literal notranslate"><span class="pre">flow.cylc</span></code> file.</p>
<p>For more information, see <a class="reference internal" href="../workflow-design-guide/general-principles.html#installing-files"><span class="std std-ref">Installing Files At Start-up</span></a>.</p>
</section>
<section id="symlink-dirs">
<h3>Symlink Dirs<a class="headerlink" href="#symlink-dirs" title="Permalink to this headline"></a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="../user-guide/installing-workflows.html#symlinkdirs"><span class="std std-ref">Symlink Directories</span></a></p></li>
<li><p><a class="reference internal" href="../user-guide/running-workflows/scheduler-start-up.html#remoteinit"><span class="std std-ref">Remote Initialization</span></a></p></li>
</ul>
</div>
<p>Symlinking the workflow directories used by Cylc provides a useful way of
managing disk space.</p>
<p>These symlinks are created on a per install target basis, as configured in
<a class="reference internal" href="../reference/config/global.html#global.cylc[install][symlink dirs]" title="global.cylc[install][symlink dirs]"><code class="xref cylc cylc-conf docutils literal notranslate"><span class="pre">global.cylc[install][symlink</span> <span class="pre">dirs]</span></code></a>. Install targets are managed on
a site level, for more information see <a class="reference internal" href="../reference/config/writing-platform-configs.html#install-targets"><span class="std std-ref">What Are Install Targets?</span></a>.</p>
<p>This functionality replaces the Rose <code class="docutils literal notranslate"><span class="pre">root</span> <span class="pre">dir</span></code> configuration
for Cylc 7 (however, note it does not allow per-workflow configuration).</p>
</section>
</section>
<section id="safe-run-semantics">
<h2>Safe Run Semantics<a class="headerlink" href="#safe-run-semantics" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="major-changes/play-pause-stop.html#play-pause-stop"><span class="std std-ref">Play Pause Stop</span></a></p></li>
<li><p>User Guide <a class="reference internal" href="../user-guide/running-workflows/scheduler-start-up.html#workflowstartup"><span class="std std-ref">Start, Restart, Reload</span></a></p></li>
</ul>
</div>
<p>Cylc 7 run semantics were somewhat dangerous: if you accidentally typed <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">run</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">restart</span></code> a new run from scratch would overwrite the existing
run directory, preventing a return to the intended restart.</p>
<p>Cylc 8 has <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">pause</span></code> to:</p>
<ul class="simple">
<li><p>pause a workflow (halt all job submission)</p></li>
</ul>
<p>And <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">play</span></code> to:</p>
<ul class="simple">
<li><p>start,</p></li>
<li><p>restart, and</p></li>
<li><p>release a paused workflow</p></li>
</ul>
<p>So <em>restart</em> is now the safe default behaviour. For a new run from scratch,
do a fresh <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">install</span></code> and play it safely in the new run directory.</p>
<p>(Note that <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">hold</span></code> and <code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">release</span></code> pause and release individual tasks.)</p>
</section>
<section id="security">
<h2>Security<a class="headerlink" href="#security" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Technical reference:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/architecture/ui-server.html#cylcuiserver-architecture"><span class="std std-ref">Cylc UI Server</span></a></p></li>
</ul>
</div>
<ul class="simple">
<li><p>In a multi-user context, users authenticate at the Hub, which
spawns Cylc UI Servers as the target user (workflow owner).</p></li>
<li><p>In a single user context, the UI Server can be started directly,
with token-based authentication.</p></li>
<li><p>The UI Server interacts with its own Schedulers, which also run as the user.</p></li>
<li><p>Users can authorize different levels of access to others, via their UI Server.</p></li>
<li><p>Workflow task jobs authenticate to their parent scheduler using <a class="reference external" href="http://curvezmq.org/page:read-the-docs">CurveZMQ</a>.</p></li>
<li><p>Cylc8 supports target users authorizing other users to interact with their
workflows on the UI.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The authorization system in Cylc 8 is complete but we haven’t yet provided
easy access to other users’ workflows via the UI. For the time being
use the address bar to change user name in the URL.</p>
</div>
</section>
<section id="packaging">
<h2>Packaging<a class="headerlink" href="#packaging" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="../installation.html#installation"><span class="std std-ref">Installation</span></a></p></li>
</ul>
</div>
<p>Cylc 7 had to be installed from a release tarball, and its software dependencies
had to be installed manually.</p>
<p>Cylc 8 and its core software dependencies can be installed quickly from Conda
Forge, into a conda environment; or from PyPI, into a Python 3 virtual environment.</p>
</section>
<section id="task-job-scripts">
<h2>Task Job Scripts<a class="headerlink" href="#task-job-scripts" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>User Guide <a class="reference internal" href="../user-guide/task-implementation/job-scripts.html#jobscripts"><span class="std std-ref">Task Job Scripts</span></a></p></li>
</ul>
</div>
<p>All user-defined task scripting now runs in a subshell, so you can safely
switch Python environments inside tasks without affecting Cylc.</p>
</section>
<section id="time-zones">
<h2>Time Zones<a class="headerlink" href="#time-zones" title="Permalink to this headline"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>User Guide <a class="reference internal" href="../user-guide/writing-workflows/scheduling.html#writing-flows-scheduling-syntax-rules"><span class="std std-ref">Syntax Rules</span></a></p></li>
</ul>
</div>
<p><a class="reference internal" href="../reference/config/workflow.html#flow.cylc[scheduler]cycle point time zone" title="flow.cylc[scheduler]cycle point time zone"><code class="xref cylc cylc-conf docutils literal notranslate"><span class="pre">[scheduler]cycle</span> <span class="pre">point</span> <span class="pre">time</span> <span class="pre">zone</span></code></a> now defaults to UTC, unless you
are working in <a class="reference internal" href="major-changes/compatibility-mode.html#cylc-7-compat-mode"><span class="std std-ref">Cylc 7 Compatibility Mode</span></a>.</p>
</section>
<section id="runahead-limit-queues">
<h2>Runahead Limit &amp; Queues<a class="headerlink" href="#runahead-limit-queues" title="Permalink to this headline"></a></h2>
<p>The default runahead limit has been increased from three cycles to five.</p>
<p><a class="reference internal" href="../user-guide/writing-workflows/scheduling.html#internalqueues"><span class="std std-ref">Internal Queues</span></a> are now more efficient (for the <a class="reference internal" href="../glossary.html#term-scheduler"><span class="xref std std-term">scheduler</span></a>),
we now recommend using queues to restrict the number of running tasks in
situations where graphing may have been used previously.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Cylc 8 Migration Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cheat-sheet.html" class="btn btn-neutral float-right" title="Cheat Sheet" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2008-2022 NIWA &amp; British Crown (Met Office) &amp; Contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!--
  element which gets populated with the list of available versions and
  formats for the documentation by versions.js
-->
<div
  class="rst-versions"
  data-toggle="rst-versions"
  id='versions-and-formats'
></div>



<script type="text/javascript">
    const CUR_FORMAT = "html";
    const CUR_VERSION = "8.0rc1";
    // name of page (in URL), for singlepage builds this will be `index`
    const PAGE_NAME = "7-to-8/summary";
    // URL path to the base docs dir i.e. ROOT_DIR/version/format
    const ROOT_DIR = "../../..";
</script>

<script
  type="text/javascript"
  src="../../../versions.js"
></script><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
<!DOCTYPE html>


<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Template Variables &mdash; Cylc 8.3.0.dev documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/styles.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/single.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <link rel="stylesheet" href="../../_static/css/slides-custom.css" type="text/css" />
    
    
    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/single.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/diff_selector.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/grid_table.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/hieroglyph_theme_addons.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/tutorial.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/addons.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '8.3.0.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>
    <script type="text/javascript" src="../../_static/js/diff_selector.js"></script>
    <script type="text/javascript" src="../../_static/js/minicylc.js"></script>
    <script type="text/javascript" src="../../_static/js/spoiler.js"></script>
    <script type="text/javascript" src="../../_static/js/addons.js"></script>
    <script type="text/javascript" src="../../_static/common.js"></script>
    
    <script type="text/javascript" src="../../_static/slides.js"></script>
    <script type="text/javascript" src="../../_static/sync.js"></script>
    <script type="text/javascript" src="../../_static/controller.js"></script>
    <script type="text/javascript" src="../../_static/init.js"></script>
    
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="Cylc 8.3.0.dev documentation" href="../../index.html" />
    <link rel="up" title="Detailed Description of Major Changes" href="index.html" />
    <link rel="next" title="Cylc 8 UIs" href="ui.html" />
    <link rel="prev" title="Task/Job States" href="task-job-states.html" /> 
  </head>
  <body>

<section
   id="slide_container"
   class='slides layout-regular'>


  
<article class="slide level-1" id="template-variables">

<h1>Template Variables<a class="headerlink" href="../../../html/7-to-8/major-changes/template-vars.html#template-variables" title="View HTML">§</a></h1>

<div class="tip admonition">
<p class="first admonition-title">Does This Change Affect Me?</p>
<p>Read this section if you set Cylc template variables on the command line
using the <code class="docutils literal notranslate"><span class="pre">-s</span></code>, <code class="docutils literal notranslate"><span class="pre">--set</span></code> or <code class="docutils literal notranslate"><span class="pre">-set-file</span></code> options.</p>
<p class="last">This does <em>not</em> affect the Rose <code class="docutils literal notranslate"><span class="pre">jinja2:suite.rc</span></code> and
<code class="docutils literal notranslate"><span class="pre">empy:suite.rc</span></code> variables set using the <code class="docutils literal notranslate"><span class="pre">-S</span></code> option to the
<code class="docutils literal notranslate"><span class="pre">rose</span> <span class="pre">suite-run</span></code> command.</p>
</div>




</article>
<article class="slide level-2" id="overview">

<h2>Overview<a class="headerlink" href="../../../html/7-to-8/major-changes/template-vars.html#overview" title="View HTML">§</a></h2>

<p>Template variables are passed to <a class="reference internal" href="../../user-guide/writing-workflows/jinja2.html#jinja"><span class="std std-ref">Jinja2</span></a> or
<a class="reference internal" href="../../user-guide/writing-workflows/empy.html#user-guide-empy"><span class="std std-ref">EmPy</span></a> for parsing the workflow definition in the
<a class="reference internal" href="../../reference/config/workflow.html#flow.cylc" title="flow.cylc"><code class="xref cylc cylc-conf docutils literal notranslate"><span class="pre">flow.cylc</span></code></a> file.</p>
<p>In Cylc 7 template variables could only be strings, in Cylc 8 they can be any
valid Python literal including numbers, booleans, and lists.</p>




</article>
<article class="slide level-2" id="changes">

<h2>Changes<a class="headerlink" href="../../../html/7-to-8/major-changes/template-vars.html#changes" title="View HTML">§</a></h2>

<p>Strings must be explicitly quoted i.e. <code class="docutils literal notranslate"><span class="pre">key=&quot;value&quot;</span></code> rather than <code class="docutils literal notranslate"><span class="pre">key=value</span></code>.</p>




</article>
<article class="slide level-2" id="example">

<h2>Example<a class="headerlink" href="../../../html/7-to-8/major-changes/template-vars.html#example" title="View HTML">§</a></h2>

<p class="rubric">Setting template variables on the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cylc 7</span>
cylc<span class="w"> </span>run<span class="w"> </span>&lt;suite&gt;<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39;FOO=abc&#39;</span>
<span class="c1"># Cylc 8</span>
cylc<span class="w"> </span>play<span class="w"> </span>&lt;flow&gt;<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39;FOO=&quot;abc&quot;&#39;</span>
</pre></div>
</div>
<p class="rubric">Setting template variables in a “set file” (using <code class="docutils literal notranslate"><span class="pre">--set-file</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cylc 7</span>
<span class="n">FOO</span> <span class="o">=</span> <span class="n">abc</span>
<span class="n">BAR</span> <span class="o">=</span> <span class="n">bcd</span>

<span class="c1"># Cylc 8</span>
<span class="n">FOO</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span>
<span class="n">BAR</span> <span class="o">=</span> <span class="s2">&quot;bcd&quot;</span>
</pre></div>
</div>




</article>
<article class="slide level-2" id="new-features">

<h2>New Features<a class="headerlink" href="../../../html/7-to-8/major-changes/template-vars.html#new-features" title="View HTML">§</a></h2>





</article>
<article class="slide level-3" id="any-valid-python-literals">

<h3>Any valid Python literals<a class="headerlink" href="../../../html/7-to-8/major-changes/template-vars.html#any-valid-python-literals" title="View HTML">§</a></h3>

<p>Template variables can now be any valid Python literals e.g:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;string&quot;</span>   <span class="c1"># string</span>
<span class="mi">123</span>        <span class="c1"># integer</span>
<span class="mf">12.34</span>      <span class="c1"># float</span>
<span class="kc">True</span>       <span class="c1"># boolean</span>
<span class="kc">None</span>       <span class="c1"># None type</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>  <span class="c1"># list</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># tuple</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>  <span class="c1"># set</span>
<span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>  <span class="c1"># dictionary</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../../user-guide/writing-workflows/jinja2.html#jinja2-template-variables"><span class="std std-ref">Default Values and Template Variables</span></a> for more information.</p>




</article>
<article class="slide level-3" id="shorthand-for-list-of-strings">

<h3>Shorthand for list of strings<a class="headerlink" href="../../../html/7-to-8/major-changes/template-vars.html#shorthand-for-list-of-strings" title="View HTML">§</a></h3>

<div class="versionadded">
<p><span class="versionmodified added">New in version 8.2.</span></p>
</div>
<p>A new shorthand argument (<code class="docutils literal notranslate"><span class="pre">-z</span></code>/<code class="docutils literal notranslate"><span class="pre">--set-list</span></code>/<code class="docutils literal notranslate"><span class="pre">--set-template</span></code>)
has been introduced allowing easier definition of template
variables containing lists of strings on the command line:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Before (still works)</span>
cylc<span class="w"> </span>&lt;command&gt;<span class="w"> </span>--set<span class="w"> </span><span class="s2">&quot;X=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]&quot;</span>

<span class="c1"># After</span>
cylc<span class="w"> </span>&lt;command&gt;<span class="w"> </span>--set-list<span class="w"> </span><span class="nv">X</span><span class="o">=</span>a,b,c
</pre></div>
</div>




</article>

</section>

<section id="slide_notes">

</section>

  </body>
</html>